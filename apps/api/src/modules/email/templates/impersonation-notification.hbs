<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account Access Notification - Broxiva</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background-color: #f5f5f5; }
    .container { max-width: 600px; margin: 0 auto; background: #ffffff; }
    .header { background: #2c3e50; padding: 30px 20px; text-align: center; }
    .header h1 { color: #ffffff; margin: 10px 0 0; font-size: 24px; }
    .content { padding: 40px 30px; }
    .icon { font-size: 48px; text-align: center; margin-bottom: 20px; }
    .title { font-size: 22px; font-weight: 600; margin-bottom: 20px; text-align: center; color: #2c3e50; }
    .message { color: #666; margin-bottom: 30px; }
    .info-box { background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 25px; margin: 25px 0; }
    .info-box h4 { margin: 0 0 15px; color: #1565c0; }
    .detail-row { display: flex; margin-bottom: 12px; }
    .detail-label { font-weight: 600; color: #333; min-width: 140px; }
    .detail-value { color: #666; }
    .access-mode { display: inline-block; padding: 4px 12px; border-radius: 4px; font-weight: 600; font-size: 14px; }
    .access-mode-view { background: #e8f5e9; color: #2e7d32; }
    .access-mode-full { background: #fff3e0; color: #e65100; }
    .notice-box { background: #fff8e1; border: 1px solid #ffc107; border-radius: 6px; padding: 20px; margin: 25px 0; }
    .notice-box h4 { margin: 0 0 10px; color: #f57f17; }
    .notice-box p { margin: 0; color: #5d4037; font-size: 14px; }
    .security-note { background: #f5f5f5; border-radius: 6px; padding: 20px; margin: 25px 0; }
    .security-note h4 { margin: 0 0 15px; }
    .security-note ul { margin: 0; padding-left: 20px; color: #666; }
    .security-note li { margin-bottom: 8px; }
    .action-button { display: inline-block; background: #667eea; color: #ffffff; padding: 14px 30px; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 14px; margin-top: 15px; }
    .footer { background: #f8f9fa; padding: 25px; text-align: center; color: #666; font-size: 14px; }
    .footer a { color: #667eea; text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>&#128274; Broxiva</h1>
    </div>

    <div class="content">
      <div class="icon">&#128101;</div>
      <div class="title">Account Access by Support Agent</div>

      <div class="message">
        <p>Hi {{userName}},</p>
        <p>This is to notify you that a Broxiva support agent has accessed your account. This is a standard procedure when investigating support requests or resolving issues on your behalf.</p>
      </div>

      <div class="info-box">
        <h4>&#128196; Access Details</h4>
        <div class="detail-row">
          <span class="detail-label">Support Agent:</span>
          <span class="detail-value">{{agentName}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Reason:</span>
          <span class="detail-value">{{reason}}</span>
        </div>
        {{#if ticketReference}}
        <div class="detail-row">
          <span class="detail-label">Ticket Reference:</span>
          <span class="detail-value">{{ticketReference}}</span>
        </div>
        {{/if}}
        <div class="detail-row">
          <span class="detail-label">Access Mode:</span>
          <span class="detail-value">
            <span class="access-mode {{#if (eq accessMode 'View Only')}}access-mode-view{{else}}access-mode-full{{/if}}">
              {{accessMode}}
            </span>
          </span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Session Started:</span>
          <span class="detail-value">{{startTime}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Session Expires:</span>
          <span class="detail-value">{{expiresAt}}</span>
        </div>
      </div>

      <div class="notice-box">
        <h4>&#128161; What This Means</h4>
        <p>
          {{#if (eq accessMode 'View Only')}}
          The support agent has <strong>view-only access</strong> to your account. They can see your account information to help resolve your issue, but they cannot make any changes or perform actions on your behalf.
          {{else}}
          The support agent has <strong>full access</strong> to your account to help resolve your issue. All actions taken during this session are logged and audited for your security.
          {{/if}}
        </p>
      </div>

      <div class="security-note">
        <h4>&#128737; Your Security is Our Priority</h4>
        <ul>
          <li>All support access sessions are time-limited (maximum 1 hour)</li>
          <li>Every action taken is logged for audit purposes</li>
          <li>Support agents must verify their identity with MFA before accessing accounts</li>
          <li>Admin accounts cannot be impersonated for security reasons</li>
        </ul>
      </div>

      <div style="text-align: center; margin: 30px 0;">
        <p style="color: #666;">Didn't request support or have concerns?</p>
        <a href="{{supportUrl}}" class="action-button">Contact Support</a>
      </div>

      <p style="color: #999; font-size: 13px; text-align: center;">
        This notification was sent automatically when a support agent accessed your account. No action is required from you unless you have concerns about this access.
      </p>
    </div>

    <div class="footer">
      <p><strong>Broxiva Security Team</strong></p>
      <p>Your trust and security are important to us. If you have any questions about this access, please <a href="{{supportUrl}}">contact our support team</a>.</p>
      <p style="font-size: 12px; color: #999; margin-top: 15px;">
        This is an automated security notification from Broxiva.<br>
        Please do not reply directly to this email.
      </p>
    </div>
  </div>
</body>
</html>
