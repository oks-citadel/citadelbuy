# Broxiva Production Secrets Template
# This file serves as a template for all required Kubernetes secrets
# DO NOT commit actual secret values to version control
#
# Usage:
#   1. Review all sections and identify which secrets your deployment needs
#   2. Generate secrets using: ./scripts/generate-secrets.sh
#   3. Store actual secrets in Azure Key Vault or use External Secrets Operator
#   4. For manual creation: kubectl create secret generic broxiva-secrets --from-env-file=.env.production -n broxiva-production
#
# Last Updated: 2025-12-13

---
apiVersion: v1
kind: Secret
metadata:
  name: broxiva-secrets
  namespace: broxiva-production
  labels:
    app: broxiva
    environment: production
    managed-by: external-secrets-operator
  annotations:
    description: "Production secrets for Broxiva platform"
    rotation-schedule: "90-days"
    last-rotated: "2025-12-13"
type: Opaque
stringData:
  # ============================================================================
  # SECTION 1: AUTHENTICATION & SESSION
  # Purpose: JWT tokens, session management, encryption
  # Rotation: Every 90 days
  # Critical: YES - Rotating these will invalidate all user sessions
  # ============================================================================

  # JWT Access Token Secret (min 64 chars, base64)
  # Generate: openssl rand -base64 64 | tr -d '\n'
  # Status: MUST be set before deployment
  JWT_SECRET: "REPLACE_WITH_SECURE_RANDOM_VALUE_MIN_64_CHARS"

  # JWT Refresh Token Secret (MUST be different from JWT_SECRET)
  # Generate: openssl rand -base64 64 | tr -d '\n'
  # Status: MUST be set before deployment
  JWT_REFRESH_SECRET: "REPLACE_WITH_DIFFERENT_SECURE_RANDOM_VALUE_MIN_64_CHARS"

  # JWT Token Expiry Times
  JWT_EXPIRES_IN: "1h"
  JWT_REFRESH_EXPIRES_IN: "7d"

  # Session Secret for cookie signing
  # Generate: openssl rand -base64 64 | tr -d '\n'
  # Status: MUST be set before deployment
  SESSION_SECRET: "REPLACE_WITH_SECURE_RANDOM_VALUE_MIN_64_CHARS"

  # Encryption Key (AES-256, exactly 32 bytes = 64 hex chars)
  # Generate: openssl rand -hex 32
  # Status: CRITICAL - If lost, encrypted data cannot be recovered
  # Rotation: NEVER (unless migrating data)
  ENCRYPTION_KEY: "REPLACE_WITH_64_HEX_CHARS_EXACTLY_32_BYTES"

  # KYC Encryption Key (separate from main encryption key)
  # Generate: openssl rand -hex 32
  # Status: CRITICAL - NEVER rotate without data migration plan
  KYC_ENCRYPTION_KEY: "REPLACE_WITH_64_HEX_CHARS_DIFFERENT_FROM_ABOVE"

  # ============================================================================
  # SECTION 2: DATABASE CREDENTIALS
  # Purpose: PostgreSQL connection
  # Rotation: Every 90 days
  # Critical: YES - Will cause downtime if not coordinated
  # ============================================================================

  # PostgreSQL Connection Details
  # Status: MUST be set before deployment
  POSTGRES_USER: "broxiva"
  POSTGRES_PASSWORD: "REPLACE_WITH_SECURE_DB_PASSWORD_MIN_32_CHARS"
  POSTGRES_DB: "broxiva_production"
  POSTGRES_HOST: "postgres.broxiva-production.svc.cluster.local"
  POSTGRES_PORT: "5432"

  # Full Database URL (auto-constructed or manually set)
  DATABASE_URL: "postgresql://broxiva:REPLACE_PASSWORD@postgres.broxiva-production.svc.cluster.local:5432/broxiva_production?schema=public&sslmode=require"

  # Connection Pool Settings
  DB_POOL_MIN: "2"
  DB_POOL_MAX: "10"
  DB_TIMEOUT: "30000"

  # ============================================================================
  # SECTION 3: CACHE & SESSION STORE (REDIS)
  # Purpose: Caching, session storage, rate limiting
  # Rotation: Every 90 days
  # Critical: MEDIUM - Will clear all cached data
  # ============================================================================

  # Redis Connection Details
  # Status: MUST be set before deployment
  REDIS_HOST: "redis.broxiva-production.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_PASSWORD: "REPLACE_WITH_SECURE_REDIS_PASSWORD_MIN_32_CHARS"
  REDIS_URL: "redis://:REPLACE_PASSWORD@redis.broxiva-production.svc.cluster.local:6379"
  REDIS_TLS: "false"
  REDIS_DB: "0"
  REDIS_KEY_PREFIX: "broxiva:"
  REDIS_TIMEOUT: "5000"

  # ============================================================================
  # SECTION 4: MESSAGE QUEUE (RABBITMQ)
  # Purpose: Async job processing, event streaming
  # Rotation: Every 90 days
  # Critical: MEDIUM - May require service restart
  # ============================================================================

  # RabbitMQ Connection Details
  # Status: MUST be set before deployment
  RABBITMQ_USER: "broxiva"
  RABBITMQ_PASSWORD: "REPLACE_WITH_SECURE_RABBITMQ_PASSWORD_MIN_32_CHARS"
  RABBITMQ_HOST: "rabbitmq.broxiva-production.svc.cluster.local"
  RABBITMQ_PORT: "5672"
  RABBITMQ_URL: "amqp://broxiva:REPLACE_PASSWORD@rabbitmq.broxiva-production.svc.cluster.local:5672"
  RABBITMQ_VHOST: "/"

  # ============================================================================
  # SECTION 5: OBJECT STORAGE (MINIO/S3)
  # Purpose: File uploads, documents, images
  # Rotation: Every 180 days
  # Critical: LOW - Can be rotated with zero downtime
  # ============================================================================

  # MinIO/S3 Credentials
  # Status: MUST be set before deployment
  MINIO_ROOT_USER: "broxiva_admin"
  MINIO_ROOT_PASSWORD: "REPLACE_WITH_SECURE_MINIO_PASSWORD_MIN_32_CHARS"
  MINIO_ENDPOINT: "minio.broxiva-production.svc.cluster.local"
  MINIO_PORT: "9000"
  MINIO_USE_SSL: "false"
  MINIO_BUCKET: "broxiva-uploads"
  MINIO_ACCESS_KEY: "REPLACE_WITH_ACCESS_KEY_MIN_20_CHARS"
  MINIO_SECRET_KEY: "REPLACE_WITH_SECRET_KEY_MIN_40_CHARS"

  # ============================================================================
  # SECTION 6: PAYMENT PROVIDERS
  # Purpose: Stripe, PayPal payment processing
  # Rotation: As needed per provider's security policy
  # Critical: YES - Invalid keys will break payments
  # ============================================================================

  # Stripe (Primary Payment Gateway)
  # Get from: https://dashboard.stripe.com/apikeys
  # Status: MUST use LIVE keys (sk_live_*, pk_live_*)
  STRIPE_ENABLED: "true"
  STRIPE_SECRET_KEY: "sk_live_REPLACE_WITH_LIVE_KEY_FROM_STRIPE_DASHBOARD"
  STRIPE_PUBLISHABLE_KEY: "pk_live_REPLACE_WITH_LIVE_PUBLISHABLE_KEY"
  STRIPE_WEBHOOK_SECRET: "whsec_REPLACE_WITH_WEBHOOK_SECRET_FROM_STRIPE"

  # Apple Pay / Google Pay
  APPLE_MERCHANT_ID: "merchant.com.broxiva"
  GOOGLE_MERCHANT_ID: "BCR2DN4TXXXXXXXX"

  # PayPal (Secondary Payment Gateway)
  # Get from: https://developer.paypal.com/dashboard
  # Status: MUST be in LIVE mode
  PAYPAL_ENABLED: "true"
  PAYPAL_CLIENT_ID: "REPLACE_WITH_PAYPAL_CLIENT_ID"
  PAYPAL_CLIENT_SECRET: "REPLACE_WITH_PAYPAL_CLIENT_SECRET"
  PAYPAL_MODE: "live"
  PAYPAL_WEBHOOK_ID: "REPLACE_WITH_WEBHOOK_ID"

  # ============================================================================
  # SECTION 7: EMAIL SERVICE
  # Purpose: Transactional emails, notifications
  # Rotation: As needed
  # Critical: HIGH - Users won't receive emails
  # ============================================================================

  # SendGrid Configuration
  # Get from: https://app.sendgrid.com/settings/api_keys
  # Status: MUST be set for email functionality
  SENDGRID_API_KEY: "SG.REPLACE_WITH_SENDGRID_API_KEY"
  SENDGRID_FROM_EMAIL: "noreply@broxiva.com"
  SENDGRID_FROM_NAME: "Broxiva"

  # SMTP Fallback
  EMAIL_HOST: "smtp.sendgrid.net"
  EMAIL_PORT: "587"
  EMAIL_USER: "apikey"
  EMAIL_PASSWORD: "SG.REPLACE_WITH_SENDGRID_API_KEY"
  EMAIL_FROM: "noreply@broxiva.com"
  EMAIL_SECURE: "false"
  EMAIL_TLS: "true"
  SUPPORT_EMAIL: "support@broxiva.com"

  # ============================================================================
  # SECTION 8: SOCIAL AUTHENTICATION (OAUTH)
  # Purpose: Google, Facebook, GitHub login
  # Rotation: As needed
  # Critical: MEDIUM - Social login will fail
  # ============================================================================

  # Google OAuth
  # Get from: https://console.cloud.google.com/apis/credentials
  # Status: Optional (required only if social login enabled)
  GOOGLE_CLIENT_ID: "REPLACE_WITH_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
  GOOGLE_CLIENT_SECRET: "REPLACE_WITH_GOOGLE_CLIENT_SECRET"
  GOOGLE_REDIRECT_URI: "https://broxiva.com/auth/google/callback"

  # Facebook OAuth
  # Get from: https://developers.facebook.com/apps/
  # Status: Optional
  FACEBOOK_APP_ID: "REPLACE_WITH_FACEBOOK_APP_ID"
  FACEBOOK_APP_SECRET: "REPLACE_WITH_FACEBOOK_APP_SECRET"
  FACEBOOK_REDIRECT_URI: "https://broxiva.com/auth/facebook/callback"

  # GitHub OAuth
  # Get from: https://github.com/settings/developers
  # Status: Optional
  GITHUB_CLIENT_ID: "REPLACE_WITH_GITHUB_CLIENT_ID"
  GITHUB_CLIENT_SECRET: "REPLACE_WITH_GITHUB_CLIENT_SECRET"
  GITHUB_REDIRECT_URI: "https://broxiva.com/auth/github/callback"

  # Apple Sign In
  # Get from: https://developer.apple.com/account/
  # Status: Optional
  APPLE_CLIENT_ID: "com.broxiva.app"
  APPLE_TEAM_ID: "REPLACE_WITH_TEAM_ID"
  APPLE_KEY_ID: "REPLACE_WITH_KEY_ID"
  APPLE_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----"

  # ============================================================================
  # SECTION 9: SEARCH SERVICES
  # Purpose: Product search, full-text search
  # Rotation: Every 180 days
  # Critical: MEDIUM - Search functionality will fail
  # ============================================================================

  # Elasticsearch
  # Status: Optional (only if using Elasticsearch)
  ELASTICSEARCH_NODE: "https://elasticsearch.broxiva-production.svc.cluster.local:9200"
  ELASTICSEARCH_USERNAME: "elastic"
  ELASTICSEARCH_PASSWORD: "REPLACE_WITH_ELASTICSEARCH_PASSWORD_MIN_32_CHARS"
  ELASTICSEARCH_INDEX_PREFIX: "broxiva"
  ELASTICSEARCH_BULK_SIZE: "1000"
  ELASTICSEARCH_REQUEST_TIMEOUT: "30000"
  ELASTICSEARCH_SSL_VERIFY: "true"

  # Algolia (Alternative)
  # Get from: https://www.algolia.com/account/api-keys/
  # Status: Optional
  ALGOLIA_ENABLED: "false"
  ALGOLIA_APP_ID: "REPLACE_WITH_ALGOLIA_APP_ID"
  ALGOLIA_API_KEY: "REPLACE_WITH_ALGOLIA_ADMIN_API_KEY"
  ALGOLIA_INDEX_NAME: "broxiva_products_production"

  # ============================================================================
  # SECTION 10: AI SERVICES
  # Purpose: AI recommendations, chat, content generation
  # Rotation: As needed
  # Critical: LOW - AI features will fail but core app works
  # ============================================================================

  # OpenAI
  # Get from: https://platform.openai.com/api-keys
  # Status: Optional (required only if AI features enabled)
  OPENAI_API_KEY: "sk-proj-REPLACE_WITH_OPENAI_API_KEY"
  OPENAI_MODEL: "gpt-4"
  OPENAI_MAX_TOKENS: "2000"

  # Google Cloud Vision (for visual search)
  # Status: Optional
  GOOGLE_CLOUD_PROJECT_ID: "REPLACE_WITH_PROJECT_ID"
  GOOGLE_APPLICATION_CREDENTIALS: "/secrets/google-cloud-key.json"

  # ============================================================================
  # SECTION 11: MONITORING & LOGGING
  # Purpose: Error tracking, performance monitoring
  # Rotation: As needed
  # Critical: LOW - Monitoring will fail but app continues
  # ============================================================================

  # Sentry (Error Tracking)
  # Get from: https://sentry.io/settings/projects/
  # Status: RECOMMENDED for production
  SENTRY_DSN: "https://REPLACE_KEY@o0000000.ingest.sentry.io/0000000"
  SENTRY_ENVIRONMENT: "production"
  SENTRY_RELEASE: "1.0.0"
  SENTRY_TRACES_SAMPLE_RATE: "0.1"

  # New Relic (APM)
  # Status: Optional
  NEW_RELIC_ENABLED: "false"
  NEW_RELIC_LICENSE_KEY: "REPLACE_WITH_LICENSE_KEY"
  NEW_RELIC_APP_NAME: "Broxiva Production"

  # Datadog
  # Status: Optional
  DATADOG_ENABLED: "false"
  DATADOG_API_KEY: "REPLACE_WITH_DATADOG_API_KEY"

  # ============================================================================
  # SECTION 12: ADMIN TOOLS
  # Purpose: Grafana, pgAdmin access
  # Rotation: Every 180 days
  # Critical: LOW - Admin tools only
  # ============================================================================

  # Grafana Dashboard
  # Status: RECOMMENDED for production monitoring
  GRAFANA_ADMIN_USER: "admin"
  GRAFANA_ADMIN_PASSWORD: "REPLACE_WITH_SECURE_GRAFANA_PASSWORD_MIN_32_CHARS"
  GRAFANA_PORT: "3001"

  # pgAdmin (Database UI)
  # Status: Optional
  PGADMIN_DEFAULT_EMAIL: "admin@broxiva.com"
  PGADMIN_DEFAULT_PASSWORD: "REPLACE_WITH_SECURE_PGADMIN_PASSWORD_MIN_32_CHARS"
  PGADMIN_PORT: "5050"

  # ============================================================================
  # SECTION 13: INTERNAL API KEYS
  # Purpose: Service-to-service authentication
  # Rotation: Every 90 days
  # Critical: HIGH - Internal services won't communicate
  # ============================================================================

  # Internal Service Authentication
  # Generate: openssl rand -base64 48 | tr -d '\n'
  # Status: MUST be set before deployment
  INTERNAL_API_KEY: "REPLACE_WITH_INTERNAL_API_KEY_MIN_40_CHARS"
  WEBHOOK_SECRET: "REPLACE_WITH_WEBHOOK_SECRET_MIN_64_CHARS"

  # ============================================================================
  # SECTION 14: ANALYTICS & MARKETING
  # Purpose: Facebook Pixel, TikTok Events, Google Analytics
  # Rotation: As needed
  # Critical: LOW - Analytics only
  # ============================================================================

  # Facebook Conversions API
  # Get from: https://business.facebook.com/
  # Status: Optional
  FACEBOOK_PIXEL_ID: "REPLACE_WITH_PIXEL_ID"
  FACEBOOK_ACCESS_TOKEN: "REPLACE_WITH_ACCESS_TOKEN"

  # TikTok Events API
  # Get from: https://ads.tiktok.com/
  # Status: Optional
  TIKTOK_PIXEL_ID: "REPLACE_WITH_PIXEL_ID"
  TIKTOK_ACCESS_TOKEN: "REPLACE_WITH_ACCESS_TOKEN"

  # Google Analytics
  # Status: Optional
  GOOGLE_ANALYTICS_ID: "UA-XXXXXXXXX-X"

  # ============================================================================
  # SECTION 15: MOBILE APP (In-App Purchases)
  # Purpose: Apple IAP, Google Play Billing
  # Rotation: As needed per platform policy
  # Critical: HIGH if mobile app is deployed
  # ============================================================================

  # Apple IAP (iOS StoreKit)
  # Get from: https://appstoreconnect.apple.com
  # Status: Required only if iOS app is deployed
  APPLE_SHARED_SECRET: "REPLACE_WITH_SHARED_SECRET"
  APPLE_BUNDLE_ID: "com.broxiva.app"
  APPLE_ISSUER_ID: "REPLACE_WITH_ISSUER_ID"
  APPLE_IAP_KEY_ID: "REPLACE_WITH_KEY_ID"
  APPLE_IAP_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----"

  # Google Play Billing (Android)
  # Get from: https://play.google.com/console
  # Status: Required only if Android app is deployed
  GOOGLE_PACKAGE_NAME: "com.broxiva.app"
  GOOGLE_SERVICE_ACCOUNT_EMAIL: "billing@project.iam.gserviceaccount.com"
  GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY: "-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----"

  # ============================================================================
  # SECTION 16: CLOUD STORAGE (AZURE BLOB)
  # Purpose: Alternative to MinIO/S3
  # Rotation: Every 180 days
  # Critical: HIGH if used as primary storage
  # ============================================================================

  # Azure Blob Storage
  # Get from: https://portal.azure.com
  # Status: Optional (use if Azure is primary cloud)
  AZURE_STORAGE_ENABLED: "false"
  AZURE_STORAGE_ACCOUNT_NAME: "broxiva"
  AZURE_STORAGE_ACCOUNT_KEY: "REPLACE_WITH_AZURE_STORAGE_KEY"
  AZURE_STORAGE_CONTAINER: "broxiva-documents"

---
# Secret Categories and Rotation Schedules
# Use this as a reference when planning secret rotation
#
# CRITICAL SECRETS (NEVER rotate without migration):
#   - ENCRYPTION_KEY
#   - KYC_ENCRYPTION_KEY
#
# HIGH PRIORITY (rotate every 90 days):
#   - JWT_SECRET, JWT_REFRESH_SECRET
#   - SESSION_SECRET
#   - DATABASE_URL, POSTGRES_PASSWORD
#   - REDIS_PASSWORD
#   - INTERNAL_API_KEY, WEBHOOK_SECRET
#   - STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
#   - PAYPAL_CLIENT_SECRET
#
# MEDIUM PRIORITY (rotate every 180 days):
#   - RABBITMQ_PASSWORD
#   - ELASTICSEARCH_PASSWORD
#   - MINIO credentials
#   - GRAFANA_ADMIN_PASSWORD
#   - OAuth secrets (Google, Facebook, etc.)
#
# LOW PRIORITY (rotate as needed):
#   - SENDGRID_API_KEY
#   - OPENAI_API_KEY
#   - SENTRY_DSN
#   - Analytics tokens
#   - Admin tool passwords
#
# EXTERNAL SECRETS (managed by providers):
#   - Stripe keys (rotate via Stripe dashboard)
#   - PayPal credentials (rotate via PayPal)
#   - OAuth credentials (rotate via provider)
#   - Third-party API keys
