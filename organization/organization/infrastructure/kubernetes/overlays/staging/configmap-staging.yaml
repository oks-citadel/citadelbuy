apiVersion: v1
kind: ConfigMap
metadata:
  name: broxiva-staging-config
  namespace: broxiva-staging
  labels:
    app: broxiva
    environment: staging
data:
  # Application Configuration
  NODE_ENV: "production"
  APP_ENV: "staging"
  LOG_LEVEL: "info"
  ENABLE_DEBUG: "false"

  # API Configuration
  API_PORT: "4000"
  API_HOST: "0.0.0.0"
  API_DOMAIN: "https://api-staging.broxiva.com"

  # Web Configuration
  WEB_PORT: "3000"
  WEB_HOST: "0.0.0.0"
  WEB_DOMAIN: "https://staging.broxiva.com"
  NEXT_PUBLIC_API_URL: "https://api-staging.broxiva.com"

  # Database Configuration (non-sensitive)
  DATABASE_HOST: "postgres-staging"
  DATABASE_PORT: "5432"
  DATABASE_NAME: "broxiva_staging"
  DATABASE_SSL: "true"
  DATABASE_POOL_MIN: "2"
  DATABASE_POOL_MAX: "10"

  # Redis Configuration
  REDIS_HOST: "redis-staging"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_CLUSTER_MODE: "false"

  # Queue Configuration
  BULL_REDIS_HOST: "redis-staging"
  BULL_REDIS_PORT: "6379"
  QUEUE_PREFIX: "staging-queue"

  # Email Configuration
  SMTP_HOST: "smtp.sendgrid.net"
  SMTP_PORT: "587"
  EMAIL_FROM: "staging@broxiva.com"
  EMAIL_FROM_NAME: "Broxiva Staging"

  # S3/Storage Configuration
  S3_BUCKET: "broxiva-staging-assets"
  S3_REGION: "us-east-1"
  STORAGE_PROVIDER: "s3"
  CDN_URL: "https://cdn-staging.broxiva.com"

  # Payment Gateway Configuration
  STRIPE_MODE: "test"
  PAYPAL_MODE: "sandbox"

  # Feature Flags
  ENABLE_REGISTRATION: "true"
  ENABLE_PAYMENTS: "true"
  ENABLE_EMAIL_VERIFICATION: "true"
  ENABLE_2FA: "true"
  ENABLE_RATE_LIMITING: "true"

  # Rate Limiting
  RATE_LIMIT_WINDOW_MS: "60000"
  RATE_LIMIT_MAX_REQUESTS: "100"

  # Monitoring & Observability
  ENABLE_METRICS: "true"
  ENABLE_TRACING: "true"
  METRICS_PORT: "9090"
  TRACING_SAMPLE_RATE: "0.5"

  # CORS Configuration
  CORS_ORIGIN: "https://staging.broxiva.com,https://admin-staging.broxiva.com"

  # Session Configuration
  SESSION_COOKIE_DOMAIN: ".broxiva.com"
  SESSION_COOKIE_SECURE: "true"
  SESSION_COOKIE_SAMESITE: "strict"
  SESSION_LIFETIME: "86400"

  # Compliance & Security
  ENABLE_AUDIT_LOGGING: "true"
  ENABLE_DATA_ENCRYPTION: "true"
  ENCRYPTION_ALGORITHM: "aes-256-gcm"

  # Worker Configuration
  WORKER_CONCURRENCY: "5"
  WORKER_MAX_JOBS: "50"
  WORKER_RETRY_ATTEMPTS: "3"
  WORKER_RETRY_DELAY: "5000"

  # Cache Configuration
  CACHE_TTL: "300"
  CACHE_MAX_SIZE: "100mb"

  # Search Configuration
  ELASTICSEARCH_NODE: "https://elasticsearch-staging.broxiva.com"
  ELASTICSEARCH_INDEX_PREFIX: "staging"

  # AI Services
  AI_SERVICE_TIMEOUT: "30000"
  AI_MAX_RETRIES: "2"
