# ====================================
# TAX CALCULATION CONFIGURATION
# ====================================

# Tax Provider Selection
# Options: taxjar, avalara, none
# - taxjar: Use TaxJar for US sales tax (11,000+ jurisdictions)
# - avalara: Use Avalara AvaTax for global tax (190+ countries)
# - none: Use internal tax calculation only (no external provider)
TAX_PROVIDER=taxjar

# ====================================
# TAXJAR CONFIGURATION
# ====================================
# Required if TAX_PROVIDER=taxjar
# Sign up at: https://www.taxjar.com

# Your TaxJar API key (get from dashboard)
TAXJAR_API_KEY=

# Environment: sandbox or production
# - sandbox: For testing (use test API key)
# - production: For live transactions (use live API key)
TAXJAR_ENVIRONMENT=sandbox

# ====================================
# AVALARA CONFIGURATION
# ====================================
# Required if TAX_PROVIDER=avalara
# Sign up at: https://www.avalara.com

# Your Avalara account credentials
AVALARA_ACCOUNT_ID=
AVALARA_LICENSE_KEY=

# Company code (configured in Avalara dashboard)
# Default: DEFAULT
AVALARA_COMPANY_CODE=DEFAULT

# Environment: sandbox or production
AVALARA_ENVIRONMENT=sandbox

# ====================================
# REDIS CONFIGURATION (for caching)
# ====================================
# Redis is used to cache tax calculations
# Reduces external API calls by ~80%

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Optional: Redis URL (alternative to individual settings)
# REDIS_URL=redis://localhost:6379

# ====================================
# TAX CALCULATION SETTINGS
# ====================================

# Cache TTL (seconds) - default: 3600 (1 hour)
# TAX_CACHE_TTL=3600

# Enable debug logging for tax calculations
# TAX_DEBUG=false

# Default tax rounding precision (decimal places)
# TAX_ROUNDING_PRECISION=2

# ====================================
# NOTES
# ====================================
#
# 1. TaxJar Notes:
#    - US, Canada, Australia, EU supported
#    - Rate limits: Varies by plan (check your dashboard)
#    - Exemption certificate validation requires Plus plan
#    - Product tax codes: https://developers.taxjar.com/api/guides/product-tax-codes/
#
# 2. Avalara Notes:
#    - Supports 190+ countries
#    - Requires company setup in Avalara dashboard
#    - More expensive than TaxJar but more features
#    - Address validation available
#    - Returns filing automation available
#
# 3. Internal Calculation:
#    - No external dependencies
#    - Must manually configure tax rates via API
#    - No automatic rate updates
#    - Good for testing or specific use cases
#
# 4. Caching:
#    - Caches tax calculations for 1 hour by default
#    - Automatically invalidated when tax rates updated
#    - Falls back to direct calculation if Redis unavailable
#
# 5. Error Handling:
#    - External provider failures fall back to internal calculation
#    - Complete failures return zero tax (doesn't block orders)
#    - All errors logged for monitoring
#
# ====================================

# Example Production Configuration:
# TAX_PROVIDER=taxjar
# TAXJAR_API_KEY=live_abc123xyz...
# TAXJAR_ENVIRONMENT=production
# REDIS_HOST=redis.production.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your_secure_password
