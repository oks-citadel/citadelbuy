{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import Platform from\"react-native-web/dist/exports/Platform\";import Linking from\"react-native-web/dist/exports/Linking\";import*as InAppPurchases from'expo-in-app-purchases';import{api}from'./api';import{getPlatformProductIds,findProductById}from'../config/iap-products';export var paymentsApi={createCheckoutSession:function(){var _createCheckoutSession=_asyncToGenerator(function*(request){var response=yield api.post('/payments/checkout-session',request);return response.data;});function createCheckoutSession(_x){return _createCheckoutSession.apply(this,arguments);}return createCheckoutSession;}(),getPaymentStatus:function(){var _getPaymentStatus=_asyncToGenerator(function*(provider,transactionId){var response=yield api.get(`/payments/status/${provider}/${transactionId}`);return response.data;});function getPaymentStatus(_x2,_x3){return _getPaymentStatus.apply(this,arguments);}return getPaymentStatus;}(),createPayPalOrder:function(){var _createPayPalOrder=_asyncToGenerator(function*(request){var response=yield api.post('/payments/paypal/create-order',request);return response.data;});function createPayPalOrder(_x4){return _createPayPalOrder.apply(this,arguments);}return createPayPalOrder;}(),capturePayPalOrder:function(){var _capturePayPalOrder=_asyncToGenerator(function*(orderId){var response=yield api.post(`/payments/paypal/capture/${orderId}`);return response.data;});function capturePayPalOrder(_x5){return _capturePayPalOrder.apply(this,arguments);}return capturePayPalOrder;}(),initFlutterwave:function(){var _initFlutterwave=_asyncToGenerator(function*(request){var response=yield api.post('/payments/flutterwave/init',request);return response.data;});function initFlutterwave(_x6){return _initFlutterwave.apply(this,arguments);}return initFlutterwave;}(),initPaystack:function(){var _initPaystack=_asyncToGenerator(function*(request){var response=yield api.post('/payments/paystack/init',request);return response.data;});function initPaystack(_x7){return _initPaystack.apply(this,arguments);}return initPaystack;}(),getProviders:function(){var _getProviders=_asyncToGenerator(function*(currency,country){var params=new URLSearchParams();if(currency)params.append('currency',currency);if(country)params.append('country',country);var response=yield api.get(`/payments/providers?${params.toString()}`);return response.data;});function getProviders(_x8,_x9){return _getProviders.apply(this,arguments);}return getProviders;}()};export var subscriptionsApi={getPlans:function(){var _getPlans=_asyncToGenerator(function*(){var response=yield api.get('/payments/plans');return response.data.plans||[];});function getPlans(){return _getPlans.apply(this,arguments);}return getPlans;}(),createSubscription:function(){var _createSubscription=_asyncToGenerator(function*(planId,provider,paymentMethodId){var response=yield api.post('/payments/subscriptions/create',{planId:planId,provider:provider||'STRIPE',paymentMethodId:paymentMethodId});return response.data;});function createSubscription(_x0,_x1,_x10){return _createSubscription.apply(this,arguments);}return createSubscription;}(),cancelSubscription:function(){var _cancelSubscription=_asyncToGenerator(function*(subscriptionId){var immediately=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var provider=arguments.length>2?arguments[2]:undefined;var response=yield api.post(`/payments/subscriptions/${subscriptionId}/cancel?immediately=${immediately}&provider=${provider||'STRIPE'}`);return response.data;});function cancelSubscription(_x11){return _cancelSubscription.apply(this,arguments);}return cancelSubscription;}(),getSubscriptionStatus:function(){var _getSubscriptionStatus=_asyncToGenerator(function*(subscriptionId,provider){var response=yield api.get(`/payments/subscriptions/${subscriptionId}/status?provider=${provider||'STRIPE'}`);return response.data;});function getSubscriptionStatus(_x12,_x13){return _getSubscriptionStatus.apply(this,arguments);}return getSubscriptionStatus;}(),getCurrentSubscription:function(){var _getCurrentSubscription=_asyncToGenerator(function*(){var response=yield api.get('/user/subscription');return response.data;});function getCurrentSubscription(){return _getCurrentSubscription.apply(this,arguments);}return getCurrentSubscription;}()};export var iapApi={validateReceipt:function(){var _validateReceipt=_asyncToGenerator(function*(platform,receipt,productId){var response=yield api.post('/payments/iap/validate',{platform:platform,receipt:receipt,productId:productId});return response.data;});function validateReceipt(_x14,_x15,_x16){return _validateReceipt.apply(this,arguments);}return validateReceipt;}(),syncPurchase:function(){var _syncPurchase=_asyncToGenerator(function*(platform,receipt,productId){var response=yield api.post('/payments/iap/sync',{platform:platform,receipt:receipt,productId:productId});return response.data;});function syncPurchase(_x17,_x18,_x19){return _syncPurchase.apply(this,arguments);}return syncPurchase;}(),verifySubscription:function(){var _verifySubscription=_asyncToGenerator(function*(platform,receipt,productId){var response=yield api.post('/payments/iap/subscription/verify',{platform:platform,receipt:receipt,productId:productId});return response.data;});function verifySubscription(_x20,_x21,_x22){return _verifySubscription.apply(this,arguments);}return verifySubscription;}()};export var walletApi={getBalance:function(){var _getBalance=_asyncToGenerator(function*(){var response=yield api.get('/payments/wallet/balance');return response.data;});function getBalance(){return _getBalance.apply(this,arguments);}return getBalance;}(),getTransactions:function(){var _getTransactions=_asyncToGenerator(function*(){var limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:20;var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var response=yield api.get(`/payments/wallet/transactions?limit=${limit}&offset=${offset}`);return response.data;});function getTransactions(){return _getTransactions.apply(this,arguments);}return getTransactions;}(),topUp:function(){var _topUp=_asyncToGenerator(function*(amount,provider){var response=yield api.post('/payments/wallet/topup',{amount:amount,provider:provider||'STRIPE'});return response.data;});function topUp(_x23,_x24){return _topUp.apply(this,arguments);}return topUp;}(),getCreditPackages:function(){var _getCreditPackages=_asyncToGenerator(function*(){var response=yield api.get('/payments/wallet/packages');return response.data.packages||[];});function getCreditPackages(){return _getCreditPackages.apply(this,arguments);}return getCreditPackages;}(),purchasePackage:function(){var _purchasePackage=_asyncToGenerator(function*(packageId,provider){var response=yield api.post('/payments/wallet/purchase-package',{packageId:packageId,provider:provider});return response.data;});function purchasePackage(_x25,_x26){return _purchasePackage.apply(this,arguments);}return purchasePackage;}()};var IAPLogger=function(){function IAPLogger(){_classCallCheck(this,IAPLogger);this.logs=[];this.maxLogs=100;}return _createClass(IAPLogger,[{key:\"log\",value:function log(level,message,category,data){var entry={level:level,message:message,category:category,data:data,timestamp:new Date()};this.logs.push(entry);if(this.logs.length>this.maxLogs){this.logs.shift();}var logFn=level==='error'?console.error:level==='warn'?console.warn:console.log;logFn(`[IAP:${category}] ${message}`,data||'');}},{key:\"getLogs\",value:function getLogs(){return _toConsumableArray(this.logs);}},{key:\"clearLogs\",value:function clearLogs(){this.logs=[];}}]);}();var iapLogger=new IAPLogger();function createPurchaseError(code,message,details){var error={code:code,message:message};if(code==='USER_CANCELLED'||message.toLowerCase().includes('cancel')){error.userCancelled=true;}if(code==='NETWORK_ERROR'||message.toLowerCase().includes('network')){error.networkError=true;}if(code==='PRODUCT_ALREADY_OWNED'||message.toLowerCase().includes('already owned')){error.itemAlreadyOwned=true;}if(code==='PRODUCT_NOT_AVAILABLE'||message.toLowerCase().includes('not available')){error.itemUnavailable=true;}iapLogger.log('error',message,'purchase',{code:code,details:details});return error;}var BillingService=function(){function BillingService(){_classCallCheck(this,BillingService);this.iapInitialized=false;this.iapConnected=false;this.products=[];this.purchaseListener=null;this.pendingPurchases=new Map();}return _createClass(BillingService,[{key:\"initialize\",value:(function(){var _initialize=_asyncToGenerator(function*(){try{if(\"web\"==='ios'||\"web\"==='android'){iapLogger.log('info','Initializing IAP SDK','initialization',{platform:\"web\"});yield InAppPurchases.connectAsync();this.iapConnected=true;iapLogger.log('info','Connected to IAP store','initialization');var platform=\"web\";var productIds=getPlatformProductIds(platform);iapLogger.log('debug','Fetching products','initialization',{productIds:productIds});var _yield$InAppPurchases=yield InAppPurchases.getProductsAsync(productIds),results=_yield$InAppPurchases.results,responseCode=_yield$InAppPurchases.responseCode;if(responseCode===InAppPurchases.IAPResponseCode.OK){this.products=results||[];iapLogger.log('info',`Loaded ${this.products.length} products`,'initialization',{products:this.products.map(function(p){return p.productId;})});}else{iapLogger.log('warn','Failed to fetch products','initialization',{responseCode:responseCode});}this.setupPurchaseListener();yield this.finishUnfinishedTransactions();this.iapInitialized=true;iapLogger.log('info','IAP initialization complete','initialization');}}catch(error){iapLogger.log('error','Failed to initialize IAP','initialization',{error:error.message});console.error('Failed to initialize billing:',error);}});function initialize(){return _initialize.apply(this,arguments);}return initialize;}())},{key:\"setupPurchaseListener\",value:function setupPurchaseListener(){var _this=this;this.purchaseListener=InAppPurchases.setPurchaseListener(function(){var _ref2=_asyncToGenerator(function*(_ref){var responseCode=_ref.responseCode,results=_ref.results,errorCode=_ref.errorCode;iapLogger.log('debug','Purchase listener triggered','purchase',{responseCode:responseCode,errorCode:errorCode,resultsCount:(results==null?void 0:results.length)||0});if(responseCode===InAppPurchases.IAPResponseCode.OK){for(var purchase of results||[]){yield _this.handlePurchaseUpdate(purchase);}}else if(responseCode===InAppPurchases.IAPResponseCode.USER_CANCELED){iapLogger.log('info','User cancelled purchase','purchase');_this.pendingPurchases.forEach(function(resolve){resolve({success:false,cancelled:true,error:createPurchaseError('USER_CANCELLED','User cancelled the purchase')});});_this.pendingPurchases.clear();}else{iapLogger.log('error','Purchase error','purchase',{responseCode:responseCode,errorCode:errorCode});var error=createPurchaseError('UNKNOWN_ERROR',`Purchase failed with code ${responseCode}`);_this.pendingPurchases.forEach(function(resolve){resolve({success:false,error:error});});_this.pendingPurchases.clear();}});return function(_x27){return _ref2.apply(this,arguments);};}());}},{key:\"handlePurchaseUpdate\",value:(function(){var _handlePurchaseUpdate=_asyncToGenerator(function*(purchase){try{iapLogger.log('info','Processing purchase','purchase',{productId:purchase.productId,transactionId:purchase.transactionReceipt?'present':'missing'});var platform=\"web\";var receipt=purchase.transactionReceipt;if(!receipt){throw new Error('No receipt available');}iapLogger.log('debug','Validating receipt with backend','validation');var validation=yield iapApi.validateReceipt(platform,receipt,purchase.productId);if(validation.valid){iapLogger.log('info','Receipt validated successfully','validation');yield iapApi.syncPurchase(platform,receipt,purchase.productId);yield InAppPurchases.finishTransactionAsync(purchase,true);iapLogger.log('info','Transaction finished','purchase',{productId:purchase.productId});var resolver=this.pendingPurchases.get(purchase.productId);if(resolver){resolver({success:true,purchase:purchase,provider:platform==='ios'?'APPLE_IAP':'GOOGLE_IAP',transactionId:purchase.orderId||purchase.productId});this.pendingPurchases.delete(purchase.productId);}}else{throw new Error('Receipt validation failed');}}catch(error){iapLogger.log('error','Failed to process purchase','purchase',{productId:purchase.productId,error:error.message});yield InAppPurchases.finishTransactionAsync(purchase,false);var _resolver=this.pendingPurchases.get(purchase.productId);if(_resolver){_resolver({success:false,error:createPurchaseError('RECEIPT_VALIDATION_FAILED',error.message)});this.pendingPurchases.delete(purchase.productId);}}});function handlePurchaseUpdate(_x28){return _handlePurchaseUpdate.apply(this,arguments);}return handlePurchaseUpdate;}())},{key:\"finishUnfinishedTransactions\",value:(function(){var _finishUnfinishedTransactions=_asyncToGenerator(function*(){try{var history=yield InAppPurchases.getPurchaseHistoryAsync();if(history.responseCode===InAppPurchases.IAPResponseCode.OK&&history.results){iapLogger.log('info',`Found ${history.results.length} purchase history items`,'initialization');for(var purchase of history.results){if(purchase.acknowledged===false){iapLogger.log('info','Finishing unfinished transaction','purchase',{productId:purchase.productId});yield InAppPurchases.finishTransactionAsync(purchase,true);}}}}catch(error){iapLogger.log('warn','Failed to check unfinished transactions','initialization',{error:error.message});}});function finishUnfinishedTransactions(){return _finishUnfinishedTransactions.apply(this,arguments);}return finishUnfinishedTransactions;}())},{key:\"getAvailableProviders\",value:(function(){var _getAvailableProviders=_asyncToGenerator(function*(currency,country){return paymentsApi.getProviders(currency,country);});function getAvailableProviders(_x29,_x30){return _getAvailableProviders.apply(this,arguments);}return getAvailableProviders;}())},{key:\"getProducts\",value:(function(){var _getProducts=_asyncToGenerator(function*(){if(!this.iapInitialized){iapLogger.log('warn','IAP not initialized','purchase');return[];}return this.products.map(function(product){var configProduct=findProductById(product.productId);return{productId:product.productId,title:product.title||(configProduct==null?void 0:configProduct.name)||'',description:product.description||(configProduct==null?void 0:configProduct.description)||'',price:product.price||'',priceAmountMicros:parseInt(product.priceAmountMicros||'0'),priceCurrencyCode:product.priceCurrencyCode||'USD',type:(configProduct==null?void 0:configProduct.type)||'consumable',subscriptionPeriod:product.subscriptionPeriod,credits:configProduct==null?void 0:configProduct.credits,bonus:configProduct==null?void 0:configProduct.bonus,interval:configProduct==null?void 0:configProduct.interval};});});function getProducts(){return _getProducts.apply(this,arguments);}return getProducts;}())},{key:\"processGatewayPayment\",value:(function(){var _processGatewayPayment=_asyncToGenerator(function*(request){try{var _response$error;var response;switch(request.provider){case'PAYPAL':response=yield paymentsApi.createPayPalOrder(request);break;case'FLUTTERWAVE':response=yield paymentsApi.initFlutterwave(request);break;case'PAYSTACK':response=yield paymentsApi.initPaystack(request);break;default:response=yield paymentsApi.createCheckoutSession(request);}if(response.success&&response.checkoutUrl){var supported=yield Linking.canOpenURL(response.checkoutUrl);if(supported){yield Linking.openURL(response.checkoutUrl);}return{success:true,transactionId:response.transactionId,provider:response.provider||request.provider||'STRIPE'};}return{success:false,provider:request.provider||'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',((_response$error=response.error)==null?void 0:_response$error.message)||'Failed to create payment')};}catch(error){return{success:false,provider:request.provider||'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',error.message||'Payment failed')};}});function processGatewayPayment(_x31){return _processGatewayPayment.apply(this,arguments);}return processGatewayPayment;}())},{key:\"purchaseSubscription\",value:(function(){var _purchaseSubscription=_asyncToGenerator(function*(plan){var useNativeIAP=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(useNativeIAP&&this.iapInitialized){if(\"web\"==='ios'&&plan.appleProductId){return this.purchaseAppleIAP(plan.appleProductId);}if(\"web\"==='android'&&plan.googleProductId){return this.purchaseGoogleIAP(plan.googleProductId);}}try{var _response$error2;var response=yield subscriptionsApi.createSubscription(plan.stripeProductId||plan.id,'STRIPE');if(response.success&&response.checkoutUrl){yield Linking.openURL(response.checkoutUrl);return{success:true,transactionId:response.subscriptionId,provider:'STRIPE'};}return{success:false,provider:'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',((_response$error2=response.error)==null?void 0:_response$error2.message)||'Failed to create subscription')};}catch(error){return{success:false,provider:'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',error.message||'Subscription failed')};}});function purchaseSubscription(_x32){return _purchaseSubscription.apply(this,arguments);}return purchaseSubscription;}())},{key:\"purchaseAppleIAP\",value:(function(){var _purchaseAppleIAP=_asyncToGenerator(function*(productId){var _this2=this;try{if(!this.iapInitialized){throw createPurchaseError('NOT_INITIALIZED','IAP not initialized');}iapLogger.log('info','Starting Apple IAP purchase','purchase',{productId:productId});var purchasePromise=new Promise(function(resolve){_this2.pendingPurchases.set(productId,resolve);});yield InAppPurchases.purchaseItemAsync(productId);var timeoutPromise=new Promise(function(resolve){setTimeout(function(){_this2.pendingPurchases.delete(productId);resolve({success:false,error:createPurchaseError('UNKNOWN_ERROR','Purchase timeout')});},60000);});var result=yield Promise.race([purchasePromise,timeoutPromise]);return result;}catch(error){iapLogger.log('error','Apple IAP purchase failed','purchase',{error:error.message});this.pendingPurchases.delete(productId);return{success:false,provider:'APPLE_IAP',error:createPurchaseError('UNKNOWN_ERROR',error.message||'Apple IAP failed')};}});function purchaseAppleIAP(_x33){return _purchaseAppleIAP.apply(this,arguments);}return purchaseAppleIAP;}())},{key:\"purchaseGoogleIAP\",value:(function(){var _purchaseGoogleIAP=_asyncToGenerator(function*(productId){var _this3=this;try{if(!this.iapInitialized){throw createPurchaseError('NOT_INITIALIZED','IAP not initialized');}iapLogger.log('info','Starting Google Play purchase','purchase',{productId:productId});var purchasePromise=new Promise(function(resolve){_this3.pendingPurchases.set(productId,resolve);});yield InAppPurchases.purchaseItemAsync(productId);var timeoutPromise=new Promise(function(resolve){setTimeout(function(){_this3.pendingPurchases.delete(productId);resolve({success:false,error:createPurchaseError('UNKNOWN_ERROR','Purchase timeout')});},60000);});var result=yield Promise.race([purchasePromise,timeoutPromise]);return result;}catch(error){iapLogger.log('error','Google Play purchase failed','purchase',{error:error.message});this.pendingPurchases.delete(productId);return{success:false,provider:'GOOGLE_IAP',error:createPurchaseError('UNKNOWN_ERROR',error.message||'Google Play Billing failed')};}});function purchaseGoogleIAP(_x34){return _purchaseGoogleIAP.apply(this,arguments);}return purchaseGoogleIAP;}())},{key:\"restorePurchases\",value:(function(){var _restorePurchases=_asyncToGenerator(function*(){try{if(!this.iapInitialized){throw new Error('IAP not initialized');}iapLogger.log('info','Starting purchase restore','restore');var platform=\"web\";var restoredCount=0;var history=yield InAppPurchases.getPurchaseHistoryAsync();if(history.responseCode===InAppPurchases.IAPResponseCode.OK&&history.results){iapLogger.log('info',`Found ${history.results.length} purchases to restore`,'restore');for(var purchase of history.results){try{var receipt=purchase.transactionReceipt;if(!receipt)continue;var validation=yield iapApi.validateReceipt(platform,receipt,purchase.productId);if(validation.valid){yield iapApi.syncPurchase(platform,receipt,purchase.productId);restoredCount++;iapLogger.log('info','Restored purchase','restore',{productId:purchase.productId});}}catch(error){iapLogger.log('warn','Failed to restore purchase','restore',{productId:purchase.productId,error:error.message});}}iapLogger.log('info',`Restore complete: ${restoredCount} purchases restored`,'restore');return{success:true,restoredCount:restoredCount};}else{throw new Error('Failed to get purchase history');}}catch(error){iapLogger.log('error','Purchase restore failed','restore',{error:error.message});return{success:false,restoredCount:0,error:error.message||'Failed to restore purchases'};}});function restorePurchases(){return _restorePurchases.apply(this,arguments);}return restorePurchases;}())},{key:\"getWalletBalance\",value:(function(){var _getWalletBalance=_asyncToGenerator(function*(){return walletApi.getBalance();});function getWalletBalance(){return _getWalletBalance.apply(this,arguments);}return getWalletBalance;}())},{key:\"purchaseCreditPackage\",value:(function(){var _purchaseCreditPackage=_asyncToGenerator(function*(pkg){var useNativeIAP=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(useNativeIAP&&this.iapInitialized){if(\"web\"==='ios'&&pkg.appleProductId){return yield this.purchaseAppleIAP(pkg.appleProductId);}if(\"web\"==='android'&&pkg.googleProductId){return yield this.purchaseGoogleIAP(pkg.googleProductId);}}try{var _response$error3;var response=yield walletApi.purchasePackage(pkg.id);if(response.success&&response.checkoutUrl){yield Linking.openURL(response.checkoutUrl);return{success:true,transactionId:response.transactionId,provider:'STRIPE'};}return{success:false,provider:'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',((_response$error3=response.error)==null?void 0:_response$error3.message)||'Failed to purchase package')};}catch(error){return{success:false,provider:'STRIPE',error:createPurchaseError('UNKNOWN_ERROR',error.message||'Purchase failed')};}});function purchaseCreditPackage(_x35){return _purchaseCreditPackage.apply(this,arguments);}return purchaseCreditPackage;}())},{key:\"cancelSubscription\",value:(function(){var _cancelSubscription2=_asyncToGenerator(function*(subscriptionId){var immediately=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{var _current$subscription;var current=yield subscriptionsApi.getCurrentSubscription();var provider=(_current$subscription=current.subscription)==null?void 0:_current$subscription.provider;if(provider==='APPLE_IAP'||provider==='GOOGLE_IAP'){var url=provider==='APPLE_IAP'?'https://apps.apple.com/account/subscriptions':'https://play.google.com/store/account/subscriptions';yield Linking.openURL(url);return true;}var response=yield subscriptionsApi.cancelSubscription(subscriptionId,immediately,provider);return response.success;}catch(error){console.error('Failed to cancel subscription:',error);return false;}});function cancelSubscription(_x36){return _cancelSubscription2.apply(this,arguments);}return cancelSubscription;}())},{key:\"getLogs\",value:function getLogs(){return iapLogger.getLogs();}},{key:\"clearLogs\",value:function clearLogs(){iapLogger.clearLogs();}},{key:\"disconnect\",value:(function(){var _disconnect=_asyncToGenerator(function*(){try{if(this.purchaseListener){this.purchaseListener.remove();this.purchaseListener=null;}if(this.iapConnected){yield InAppPurchases.disconnectAsync();this.iapConnected=false;this.iapInitialized=false;iapLogger.log('info','Disconnected from IAP store','initialization');}}catch(error){iapLogger.log('error','Failed to disconnect from IAP','initialization',{error:error.message});}});function disconnect(){return _disconnect.apply(this,arguments);}return disconnect;}())},{key:\"isIAPAvailable\",value:function isIAPAvailable(){return this.iapInitialized&&this.iapConnected;}}]);}();export var billingService=new BillingService();export default billingService;","map":{"version":3,"names":["InAppPurchases","api","getPlatformProductIds","findProductById","paymentsApi","createCheckoutSession","_createCheckoutSession","_asyncToGenerator","request","response","post","data","_x","apply","arguments","getPaymentStatus","_getPaymentStatus","provider","transactionId","get","_x2","_x3","createPayPalOrder","_createPayPalOrder","_x4","capturePayPalOrder","_capturePayPalOrder","orderId","_x5","initFlutterwave","_initFlutterwave","_x6","initPaystack","_initPaystack","_x7","getProviders","_getProviders","currency","country","params","URLSearchParams","append","toString","_x8","_x9","subscriptionsApi","getPlans","_getPlans","plans","createSubscription","_createSubscription","planId","paymentMethodId","_x0","_x1","_x10","cancelSubscription","_cancelSubscription","subscriptionId","immediately","length","undefined","_x11","getSubscriptionStatus","_getSubscriptionStatus","_x12","_x13","getCurrentSubscription","_getCurrentSubscription","iapApi","validateReceipt","_validateReceipt","platform","receipt","productId","_x14","_x15","_x16","syncPurchase","_syncPurchase","_x17","_x18","_x19","verifySubscription","_verifySubscription","_x20","_x21","_x22","walletApi","getBalance","_getBalance","getTransactions","_getTransactions","limit","offset","topUp","_topUp","amount","_x23","_x24","getCreditPackages","_getCreditPackages","packages","purchasePackage","_purchasePackage","packageId","_x25","_x26","IAPLogger","_classCallCheck","logs","maxLogs","_createClass","key","value","log","level","message","category","entry","timestamp","Date","push","shift","logFn","console","error","warn","getLogs","_toConsumableArray","clearLogs","iapLogger","createPurchaseError","code","details","toLowerCase","includes","userCancelled","networkError","itemAlreadyOwned","itemUnavailable","BillingService","iapInitialized","iapConnected","products","purchaseListener","pendingPurchases","Map","_initialize","connectAsync","productIds","_yield$InAppPurchases","getProductsAsync","results","responseCode","IAPResponseCode","OK","map","p","setupPurchaseListener","finishUnfinishedTransactions","initialize","_this","setPurchaseListener","_ref2","_ref","errorCode","resultsCount","purchase","handlePurchaseUpdate","USER_CANCELED","forEach","resolve","success","cancelled","clear","_x27","_handlePurchaseUpdate","transactionReceipt","Error","validation","valid","finishTransactionAsync","resolver","delete","_x28","_finishUnfinishedTransactions","history","getPurchaseHistoryAsync","acknowledged","_getAvailableProviders","getAvailableProviders","_x29","_x30","_getProducts","product","configProduct","title","name","description","price","priceAmountMicros","parseInt","priceCurrencyCode","type","subscriptionPeriod","credits","bonus","interval","getProducts","_processGatewayPayment","_response$error","checkoutUrl","supported","Linking","canOpenURL","openURL","processGatewayPayment","_x31","_purchaseSubscription","plan","useNativeIAP","appleProductId","purchaseAppleIAP","googleProductId","purchaseGoogleIAP","_response$error2","stripeProductId","id","purchaseSubscription","_x32","_purchaseAppleIAP","_this2","purchasePromise","Promise","set","purchaseItemAsync","timeoutPromise","setTimeout","result","race","_x33","_purchaseGoogleIAP","_this3","_x34","_restorePurchases","restoredCount","restorePurchases","_getWalletBalance","getWalletBalance","_purchaseCreditPackage","pkg","_response$error3","purchaseCreditPackage","_x35","_cancelSubscription2","_current$subscription","current","subscription","url","_x36","_disconnect","remove","disconnectAsync","disconnect","isIAPAvailable","billingService"],"sources":["C:/Users/Dell/OneDrive/Documents/Citadelbuy/CitadelBuy/organization/apps/mobile/src/services/billing.ts"],"sourcesContent":["/**\r\n * Unified Billing Service for Mobile\r\n *\r\n * Supports:\r\n * - Payment gateways (Stripe, PayPal, Flutterwave, Paystack)\r\n * - Apple In-App Purchases (StoreKit)\r\n * - Google Play Billing\r\n *\r\n * The service provides a unified interface for all payment types\r\n * and syncs purchases with the backend for server-side validation.\r\n */\r\n\r\nimport { Platform, Linking } from 'react-native';\r\nimport * as SecureStore from 'expo-secure-store';\r\nimport * as InAppPurchases from 'expo-in-app-purchases';\r\nimport type {\r\n  IAPItemDetails,\r\n  InAppPurchase,\r\n  IAPQueryResponse,\r\n} from 'expo-in-app-purchases';\r\nimport { api } from './api';\r\nimport {\r\n  getPlatformProductIds,\r\n  findProductById,\r\n  SUBSCRIPTION_PRODUCTS,\r\n  CREDIT_PACKAGES,\r\n} from '../config/iap-products';\r\nimport type {\r\n  PurchaseResult,\r\n  PurchaseError,\r\n  EnrichedProduct,\r\n  SubscriptionStatus,\r\n  IAPLogEntry,\r\n} from '../types/iap.types';\r\nimport { IAPErrorCode } from '../types/iap.types';\r\n\r\n// ==================== Types ====================\r\n\r\nexport type PaymentProvider = 'STRIPE' | 'PAYPAL' | 'FLUTTERWAVE' | 'PAYSTACK' | 'APPLE_IAP' | 'GOOGLE_IAP';\r\n\r\nexport interface PaymentResult {\r\n  success: boolean;\r\n  transactionId?: string;\r\n  provider?: PaymentProvider;\r\n  error?: PurchaseError;\r\n  purchase?: InAppPurchase;\r\n  cancelled?: boolean;\r\n}\r\n\r\nexport interface CheckoutRequest {\r\n  amount: number;\r\n  currency: string;\r\n  provider?: PaymentProvider;\r\n  items?: Array<{\r\n    id: string;\r\n    name: string;\r\n    quantity: number;\r\n    unitPrice: number;\r\n  }>;\r\n  metadata?: Record<string, any>;\r\n  returnUrl?: string;\r\n  cancelUrl?: string;\r\n}\r\n\r\nexport interface SubscriptionPlan {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  currency: string;\r\n  interval: 'month' | 'year';\r\n  features: string[];\r\n  // Platform-specific product IDs\r\n  stripeProductId?: string;\r\n  appleProductId?: string;\r\n  googleProductId?: string;\r\n}\r\n\r\nexport interface WalletBalance {\r\n  balance: number;\r\n  currency: string;\r\n}\r\n\r\nexport interface CreditPackage {\r\n  id: string;\r\n  name: string;\r\n  credits: number;\r\n  price: number;\r\n  currency: string;\r\n  bonus?: number;\r\n  // Platform-specific product IDs\r\n  appleProductId?: string;\r\n  googleProductId?: string;\r\n}\r\n\r\n// ==================== Payment Gateway Service ====================\r\n\r\nexport const paymentsApi = {\r\n  // Create checkout session (auto-selects provider)\r\n  createCheckoutSession: async (request: CheckoutRequest) => {\r\n    const response = await api.post('/payments/checkout-session', request);\r\n    return response.data;\r\n  },\r\n\r\n  // Get payment status\r\n  getPaymentStatus: async (provider: PaymentProvider, transactionId: string) => {\r\n    const response = await api.get(`/payments/status/${provider}/${transactionId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // PayPal\r\n  createPayPalOrder: async (request: CheckoutRequest) => {\r\n    const response = await api.post('/payments/paypal/create-order', request);\r\n    return response.data;\r\n  },\r\n\r\n  capturePayPalOrder: async (orderId: string) => {\r\n    const response = await api.post(`/payments/paypal/capture/${orderId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Flutterwave\r\n  initFlutterwave: async (request: CheckoutRequest) => {\r\n    const response = await api.post('/payments/flutterwave/init', request);\r\n    return response.data;\r\n  },\r\n\r\n  // Paystack\r\n  initPaystack: async (request: CheckoutRequest) => {\r\n    const response = await api.post('/payments/paystack/init', request);\r\n    return response.data;\r\n  },\r\n\r\n  // Get available providers\r\n  getProviders: async (currency?: string, country?: string) => {\r\n    const params = new URLSearchParams();\r\n    if (currency) params.append('currency', currency);\r\n    if (country) params.append('country', country);\r\n    const response = await api.get(`/payments/providers?${params.toString()}`);\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// ==================== Subscription Service ====================\r\n\r\nexport const subscriptionsApi = {\r\n  // Get available plans\r\n  getPlans: async (): Promise<SubscriptionPlan[]> => {\r\n    const response = await api.get('/payments/plans');\r\n    return response.data.plans || [];\r\n  },\r\n\r\n  // Create subscription\r\n  createSubscription: async (planId: string, provider?: PaymentProvider, paymentMethodId?: string) => {\r\n    const response = await api.post('/payments/subscriptions/create', {\r\n      planId,\r\n      provider: provider || 'STRIPE',\r\n      paymentMethodId,\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Cancel subscription\r\n  cancelSubscription: async (subscriptionId: string, immediately: boolean = false, provider?: PaymentProvider) => {\r\n    const response = await api.post(\r\n      `/payments/subscriptions/${subscriptionId}/cancel?immediately=${immediately}&provider=${provider || 'STRIPE'}`\r\n    );\r\n    return response.data;\r\n  },\r\n\r\n  // Get subscription status\r\n  getSubscriptionStatus: async (subscriptionId: string, provider?: PaymentProvider) => {\r\n    const response = await api.get(\r\n      `/payments/subscriptions/${subscriptionId}/status?provider=${provider || 'STRIPE'}`\r\n    );\r\n    return response.data;\r\n  },\r\n\r\n  // Get current user subscription\r\n  getCurrentSubscription: async () => {\r\n    const response = await api.get('/user/subscription');\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// ==================== In-App Purchase Service ====================\r\n\r\nexport const iapApi = {\r\n  // Validate IAP receipt\r\n  validateReceipt: async (platform: 'ios' | 'android', receipt: string, productId?: string) => {\r\n    const response = await api.post('/payments/iap/validate', {\r\n      platform,\r\n      receipt,\r\n      productId,\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Sync IAP purchase with account\r\n  syncPurchase: async (platform: 'ios' | 'android', receipt: string, productId: string) => {\r\n    const response = await api.post('/payments/iap/sync', {\r\n      platform,\r\n      receipt,\r\n      productId,\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Verify IAP subscription status\r\n  verifySubscription: async (platform: 'ios' | 'android', receipt: string, productId: string) => {\r\n    const response = await api.post('/payments/iap/subscription/verify', {\r\n      platform,\r\n      receipt,\r\n      productId,\r\n    });\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// ==================== Wallet Service ====================\r\n\r\nexport const walletApi = {\r\n  // Get wallet balance\r\n  getBalance: async (): Promise<WalletBalance> => {\r\n    const response = await api.get('/payments/wallet/balance');\r\n    return response.data;\r\n  },\r\n\r\n  // Get wallet transactions\r\n  getTransactions: async (limit: number = 20, offset: number = 0) => {\r\n    const response = await api.get(`/payments/wallet/transactions?limit=${limit}&offset=${offset}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Top up wallet via payment gateway\r\n  topUp: async (amount: number, provider?: PaymentProvider) => {\r\n    const response = await api.post('/payments/wallet/topup', {\r\n      amount,\r\n      provider: provider || 'STRIPE',\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Get credit packages\r\n  getCreditPackages: async (): Promise<CreditPackage[]> => {\r\n    const response = await api.get('/payments/wallet/packages');\r\n    return response.data.packages || [];\r\n  },\r\n\r\n  // Purchase credit package\r\n  purchasePackage: async (packageId: string, provider?: PaymentProvider) => {\r\n    const response = await api.post('/payments/wallet/purchase-package', {\r\n      packageId,\r\n      provider,\r\n    });\r\n    return response.data;\r\n  },\r\n};\r\n\r\n// ==================== IAP Logging ====================\r\n\r\nclass IAPLogger {\r\n  private logs: IAPLogEntry[] = [];\r\n  private maxLogs = 100;\r\n\r\n  log(\r\n    level: 'debug' | 'info' | 'warn' | 'error',\r\n    message: string,\r\n    category: 'initialization' | 'purchase' | 'restore' | 'validation' | 'subscription',\r\n    data?: any\r\n  ) {\r\n    const entry: IAPLogEntry = {\r\n      level,\r\n      message,\r\n      category,\r\n      data,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    this.logs.push(entry);\r\n\r\n    // Keep only recent logs\r\n    if (this.logs.length > this.maxLogs) {\r\n      this.logs.shift();\r\n    }\r\n\r\n    // Console output\r\n    const logFn = level === 'error' ? console.error : level === 'warn' ? console.warn : console.log;\r\n    logFn(`[IAP:${category}] ${message}`, data || '');\r\n  }\r\n\r\n  getLogs(): IAPLogEntry[] {\r\n    return [...this.logs];\r\n  }\r\n\r\n  clearLogs() {\r\n    this.logs = [];\r\n  }\r\n}\r\n\r\nconst iapLogger = new IAPLogger();\r\n\r\n// ==================== IAP Error Handler ====================\r\n\r\nfunction createPurchaseError(\r\n  code: IAPErrorCode | string,\r\n  message: string,\r\n  details?: any\r\n): PurchaseError {\r\n  const error: PurchaseError = {\r\n    code,\r\n    message,\r\n  };\r\n\r\n  // Set specific flags based on error code\r\n  if (code === 'USER_CANCELLED' || message.toLowerCase().includes('cancel')) {\r\n    error.userCancelled = true;\r\n  }\r\n  if (code === 'NETWORK_ERROR' || message.toLowerCase().includes('network')) {\r\n    error.networkError = true;\r\n  }\r\n  if (code === 'PRODUCT_ALREADY_OWNED' || message.toLowerCase().includes('already owned')) {\r\n    error.itemAlreadyOwned = true;\r\n  }\r\n  if (code === 'PRODUCT_NOT_AVAILABLE' || message.toLowerCase().includes('not available')) {\r\n    error.itemUnavailable = true;\r\n  }\r\n\r\n  iapLogger.log('error', message, 'purchase', { code, details });\r\n\r\n  return error;\r\n}\r\n\r\n// ==================== Unified Billing Service ====================\r\n\r\n/**\r\n * Unified billing service that handles:\r\n * - Payment gateway flows (web redirect)\r\n * - Native IAP (Apple/Google)\r\n * - Subscription management\r\n * - Wallet/credits\r\n */\r\nclass BillingService {\r\n  private iapInitialized = false;\r\n  private iapConnected = false;\r\n  private products: IAPItemDetails[] = [];\r\n  private purchaseListener: any = null;\r\n  private pendingPurchases: Map<string, (result: PurchaseResult) => void> = new Map();\r\n\r\n  /**\r\n   * Initialize the billing service\r\n   * Must be called on app start\r\n   */\r\n  async initialize(): Promise<void> {\r\n    // Initialize native IAP SDK based on platform\r\n    try {\r\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\r\n        iapLogger.log('info', 'Initializing IAP SDK', 'initialization', { platform: Platform.OS });\r\n\r\n        // Connect to the store\r\n        await InAppPurchases.connectAsync();\r\n        this.iapConnected = true;\r\n\r\n        iapLogger.log('info', 'Connected to IAP store', 'initialization');\r\n\r\n        // Get product IDs for current platform\r\n        const platform = Platform.OS as 'ios' | 'android';\r\n        const productIds = getPlatformProductIds(platform);\r\n\r\n        iapLogger.log('debug', 'Fetching products', 'initialization', { productIds });\r\n\r\n        // Fetch product details\r\n        const { results, responseCode } = await InAppPurchases.getProductsAsync(productIds);\r\n\r\n        if (responseCode === InAppPurchases.IAPResponseCode.OK) {\r\n          this.products = results || [];\r\n          iapLogger.log('info', `Loaded ${this.products.length} products`, 'initialization', {\r\n            products: this.products.map(p => p.productId),\r\n          });\r\n        } else {\r\n          iapLogger.log('warn', 'Failed to fetch products', 'initialization', { responseCode });\r\n        }\r\n\r\n        // Set up purchase listener\r\n        this.setupPurchaseListener();\r\n\r\n        // Check for unfinished transactions\r\n        await this.finishUnfinishedTransactions();\r\n\r\n        this.iapInitialized = true;\r\n        iapLogger.log('info', 'IAP initialization complete', 'initialization');\r\n      }\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Failed to initialize IAP', 'initialization', { error: error.message });\r\n      console.error('Failed to initialize billing:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set up listener for purchase updates\r\n   */\r\n  private setupPurchaseListener() {\r\n    this.purchaseListener = InAppPurchases.setPurchaseListener(\r\n      async ({ responseCode, results, errorCode }) => {\r\n        iapLogger.log('debug', 'Purchase listener triggered', 'purchase', {\r\n          responseCode,\r\n          errorCode,\r\n          resultsCount: results?.length || 0,\r\n        });\r\n\r\n        if (responseCode === InAppPurchases.IAPResponseCode.OK) {\r\n          for (const purchase of results || []) {\r\n            await this.handlePurchaseUpdate(purchase);\r\n          }\r\n        } else if (responseCode === InAppPurchases.IAPResponseCode.USER_CANCELED) {\r\n          iapLogger.log('info', 'User cancelled purchase', 'purchase');\r\n          // Resolve any pending purchases with cancelled result\r\n          this.pendingPurchases.forEach(resolve => {\r\n            resolve({\r\n              success: false,\r\n              cancelled: true,\r\n              error: createPurchaseError('USER_CANCELLED', 'User cancelled the purchase'),\r\n            });\r\n          });\r\n          this.pendingPurchases.clear();\r\n        } else {\r\n          iapLogger.log('error', 'Purchase error', 'purchase', { responseCode, errorCode });\r\n          const error = createPurchaseError(\r\n            'UNKNOWN_ERROR',\r\n            `Purchase failed with code ${responseCode}`\r\n          );\r\n          this.pendingPurchases.forEach(resolve => {\r\n            resolve({ success: false, error });\r\n          });\r\n          this.pendingPurchases.clear();\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Handle purchase update from store\r\n   */\r\n  private async handlePurchaseUpdate(purchase: InAppPurchase) {\r\n    try {\r\n      iapLogger.log('info', 'Processing purchase', 'purchase', {\r\n        productId: purchase.productId,\r\n        transactionId: purchase.transactionReceipt ? 'present' : 'missing',\r\n      });\r\n\r\n      // Get platform\r\n      const platform = Platform.OS as 'ios' | 'android';\r\n\r\n      // Validate receipt with backend\r\n      const receipt = purchase.transactionReceipt;\r\n      if (!receipt) {\r\n        throw new Error('No receipt available');\r\n      }\r\n\r\n      iapLogger.log('debug', 'Validating receipt with backend', 'validation');\r\n\r\n      const validation = await iapApi.validateReceipt(platform, receipt, purchase.productId);\r\n\r\n      if (validation.valid) {\r\n        iapLogger.log('info', 'Receipt validated successfully', 'validation');\r\n\r\n        // Sync purchase with backend to grant entitlements\r\n        await iapApi.syncPurchase(platform, receipt, purchase.productId);\r\n\r\n        // Finish the transaction\r\n        await InAppPurchases.finishTransactionAsync(purchase, true);\r\n\r\n        iapLogger.log('info', 'Transaction finished', 'purchase', { productId: purchase.productId });\r\n\r\n        // Resolve pending purchase\r\n        const resolver = this.pendingPurchases.get(purchase.productId);\r\n        if (resolver) {\r\n          resolver({\r\n            success: true,\r\n            purchase,\r\n            provider: platform === 'ios' ? 'APPLE_IAP' : 'GOOGLE_IAP',\r\n            transactionId: purchase.orderId || purchase.productId,\r\n          });\r\n          this.pendingPurchases.delete(purchase.productId);\r\n        }\r\n      } else {\r\n        throw new Error('Receipt validation failed');\r\n      }\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Failed to process purchase', 'purchase', {\r\n        productId: purchase.productId,\r\n        error: error.message,\r\n      });\r\n\r\n      // Finish transaction with error\r\n      await InAppPurchases.finishTransactionAsync(purchase, false);\r\n\r\n      const resolver = this.pendingPurchases.get(purchase.productId);\r\n      if (resolver) {\r\n        resolver({\r\n          success: false,\r\n          error: createPurchaseError('RECEIPT_VALIDATION_FAILED', error.message),\r\n        });\r\n        this.pendingPurchases.delete(purchase.productId);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Finish any unfinished transactions from previous sessions\r\n   */\r\n  private async finishUnfinishedTransactions() {\r\n    try {\r\n      const history = await InAppPurchases.getPurchaseHistoryAsync();\r\n\r\n      if (history.responseCode === InAppPurchases.IAPResponseCode.OK && history.results) {\r\n        iapLogger.log('info', `Found ${history.results.length} purchase history items`, 'initialization');\r\n\r\n        for (const purchase of history.results) {\r\n          // Check if transaction needs to be finished\r\n          if (purchase.acknowledged === false) {\r\n            iapLogger.log('info', 'Finishing unfinished transaction', 'purchase', {\r\n              productId: purchase.productId,\r\n            });\r\n            await InAppPurchases.finishTransactionAsync(purchase, true);\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      iapLogger.log('warn', 'Failed to check unfinished transactions', 'initialization', {\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get available payment providers based on region\r\n   */\r\n  async getAvailableProviders(currency?: string, country?: string) {\r\n    return paymentsApi.getProviders(currency, country);\r\n  }\r\n\r\n  /**\r\n   * Get available IAP products with details\r\n   */\r\n  async getProducts(): Promise<EnrichedProduct[]> {\r\n    if (!this.iapInitialized) {\r\n      iapLogger.log('warn', 'IAP not initialized', 'purchase');\r\n      return [];\r\n    }\r\n\r\n    return this.products.map(product => {\r\n      const configProduct = findProductById(product.productId);\r\n\r\n      return {\r\n        productId: product.productId,\r\n        title: product.title || configProduct?.name || '',\r\n        description: product.description || configProduct?.description || '',\r\n        price: product.price || '',\r\n        priceAmountMicros: parseInt(product.priceAmountMicros || '0'),\r\n        priceCurrencyCode: product.priceCurrencyCode || 'USD',\r\n        type: configProduct?.type || 'consumable',\r\n        subscriptionPeriod: (product as any).subscriptionPeriod,\r\n        credits: (configProduct as any)?.credits,\r\n        bonus: (configProduct as any)?.bonus,\r\n        interval: (configProduct as any)?.interval,\r\n      } as EnrichedProduct;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Process a one-time payment via gateway\r\n   * Redirects to external URL for payment\r\n   */\r\n  async processGatewayPayment(request: CheckoutRequest): Promise<PaymentResult> {\r\n    try {\r\n      let response;\r\n\r\n      switch (request.provider) {\r\n        case 'PAYPAL':\r\n          response = await paymentsApi.createPayPalOrder(request);\r\n          break;\r\n        case 'FLUTTERWAVE':\r\n          response = await paymentsApi.initFlutterwave(request);\r\n          break;\r\n        case 'PAYSTACK':\r\n          response = await paymentsApi.initPaystack(request);\r\n          break;\r\n        default:\r\n          // Default to auto-select or Stripe\r\n          response = await paymentsApi.createCheckoutSession(request);\r\n      }\r\n\r\n      if (response.success && response.checkoutUrl) {\r\n        // Open payment URL in browser\r\n        const supported = await Linking.canOpenURL(response.checkoutUrl);\r\n        if (supported) {\r\n          await Linking.openURL(response.checkoutUrl);\r\n        }\r\n\r\n        return {\r\n          success: true,\r\n          transactionId: response.transactionId,\r\n          provider: response.provider || request.provider || 'STRIPE',\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        provider: request.provider || 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', response.error?.message || 'Failed to create payment'),\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        provider: request.provider || 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', error.message || 'Payment failed'),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Purchase a subscription plan\r\n   * Uses native IAP if available, otherwise falls back to gateway\r\n   */\r\n  async purchaseSubscription(plan: SubscriptionPlan, useNativeIAP: boolean = true): Promise<PaymentResult> {\r\n    // Try native IAP first if enabled and available\r\n    if (useNativeIAP && this.iapInitialized) {\r\n      if (Platform.OS === 'ios' && plan.appleProductId) {\r\n        return this.purchaseAppleIAP(plan.appleProductId);\r\n      }\r\n      if (Platform.OS === 'android' && plan.googleProductId) {\r\n        return this.purchaseGoogleIAP(plan.googleProductId);\r\n      }\r\n    }\r\n\r\n    // Fall back to gateway subscription\r\n    try {\r\n      const response = await subscriptionsApi.createSubscription(\r\n        plan.stripeProductId || plan.id,\r\n        'STRIPE'\r\n      );\r\n\r\n      if (response.success && response.checkoutUrl) {\r\n        await Linking.openURL(response.checkoutUrl);\r\n        return {\r\n          success: true,\r\n          transactionId: response.subscriptionId,\r\n          provider: 'STRIPE',\r\n        };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        provider: 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', response.error?.message || 'Failed to create subscription'),\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        provider: 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', error.message || 'Subscription failed'),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Purchase via Apple In-App Purchase\r\n   */\r\n  async purchaseAppleIAP(productId: string): Promise<PaymentResult> {\r\n    try {\r\n      if (!this.iapInitialized) {\r\n        throw createPurchaseError('NOT_INITIALIZED', 'IAP not initialized');\r\n      }\r\n\r\n      iapLogger.log('info', 'Starting Apple IAP purchase', 'purchase', { productId });\r\n\r\n      // Create a promise that will be resolved by the purchase listener\r\n      const purchasePromise = new Promise<PurchaseResult>((resolve) => {\r\n        this.pendingPurchases.set(productId, resolve);\r\n      });\r\n\r\n      // Request purchase\r\n      await InAppPurchases.purchaseItemAsync(productId);\r\n\r\n      // Wait for purchase to complete (with timeout)\r\n      const timeoutPromise = new Promise<PurchaseResult>((resolve) => {\r\n        setTimeout(() => {\r\n          this.pendingPurchases.delete(productId);\r\n          resolve({\r\n            success: false,\r\n            error: createPurchaseError('UNKNOWN_ERROR', 'Purchase timeout'),\r\n          });\r\n        }, 60000); // 60 second timeout\r\n      });\r\n\r\n      const result = await Promise.race([purchasePromise, timeoutPromise]);\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Apple IAP purchase failed', 'purchase', { error: error.message });\r\n      this.pendingPurchases.delete(productId);\r\n\r\n      return {\r\n        success: false,\r\n        provider: 'APPLE_IAP',\r\n        error: createPurchaseError('UNKNOWN_ERROR', error.message || 'Apple IAP failed'),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Purchase via Google Play Billing\r\n   */\r\n  async purchaseGoogleIAP(productId: string): Promise<PaymentResult> {\r\n    try {\r\n      if (!this.iapInitialized) {\r\n        throw createPurchaseError('NOT_INITIALIZED', 'IAP not initialized');\r\n      }\r\n\r\n      iapLogger.log('info', 'Starting Google Play purchase', 'purchase', { productId });\r\n\r\n      // Create a promise that will be resolved by the purchase listener\r\n      const purchasePromise = new Promise<PurchaseResult>((resolve) => {\r\n        this.pendingPurchases.set(productId, resolve);\r\n      });\r\n\r\n      // Request purchase\r\n      await InAppPurchases.purchaseItemAsync(productId);\r\n\r\n      // Wait for purchase to complete (with timeout)\r\n      const timeoutPromise = new Promise<PurchaseResult>((resolve) => {\r\n        setTimeout(() => {\r\n          this.pendingPurchases.delete(productId);\r\n          resolve({\r\n            success: false,\r\n            error: createPurchaseError('UNKNOWN_ERROR', 'Purchase timeout'),\r\n          });\r\n        }, 60000); // 60 second timeout\r\n      });\r\n\r\n      const result = await Promise.race([purchasePromise, timeoutPromise]);\r\n\r\n      return result;\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Google Play purchase failed', 'purchase', { error: error.message });\r\n      this.pendingPurchases.delete(productId);\r\n\r\n      return {\r\n        success: false,\r\n        provider: 'GOOGLE_IAP',\r\n        error: createPurchaseError('UNKNOWN_ERROR', error.message || 'Google Play Billing failed'),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Restore previous purchases\r\n   * Important for subscription apps\r\n   */\r\n  async restorePurchases(): Promise<{ success: boolean; restoredCount: number; error?: string }> {\r\n    try {\r\n      if (!this.iapInitialized) {\r\n        throw new Error('IAP not initialized');\r\n      }\r\n\r\n      iapLogger.log('info', 'Starting purchase restore', 'restore');\r\n\r\n      const platform = Platform.OS as 'ios' | 'android';\r\n      let restoredCount = 0;\r\n\r\n      // Get purchase history\r\n      const history = await InAppPurchases.getPurchaseHistoryAsync();\r\n\r\n      if (history.responseCode === InAppPurchases.IAPResponseCode.OK && history.results) {\r\n        iapLogger.log('info', `Found ${history.results.length} purchases to restore`, 'restore');\r\n\r\n        for (const purchase of history.results) {\r\n          try {\r\n            const receipt = purchase.transactionReceipt;\r\n            if (!receipt) continue;\r\n\r\n            // Validate and sync with backend\r\n            const validation = await iapApi.validateReceipt(\r\n              platform,\r\n              receipt,\r\n              purchase.productId\r\n            );\r\n\r\n            if (validation.valid) {\r\n              await iapApi.syncPurchase(platform, receipt, purchase.productId);\r\n              restoredCount++;\r\n\r\n              iapLogger.log('info', 'Restored purchase', 'restore', {\r\n                productId: purchase.productId,\r\n              });\r\n            }\r\n          } catch (error: any) {\r\n            iapLogger.log('warn', 'Failed to restore purchase', 'restore', {\r\n              productId: purchase.productId,\r\n              error: error.message,\r\n            });\r\n          }\r\n        }\r\n\r\n        iapLogger.log('info', `Restore complete: ${restoredCount} purchases restored`, 'restore');\r\n\r\n        return {\r\n          success: true,\r\n          restoredCount,\r\n        };\r\n      } else {\r\n        throw new Error('Failed to get purchase history');\r\n      }\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Purchase restore failed', 'restore', { error: error.message });\r\n\r\n      return {\r\n        success: false,\r\n        restoredCount: 0,\r\n        error: error.message || 'Failed to restore purchases',\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get wallet balance and credits\r\n   */\r\n  async getWalletBalance(): Promise<WalletBalance> {\r\n    return walletApi.getBalance();\r\n  }\r\n\r\n  /**\r\n   * Purchase a credit package\r\n   * Uses native IAP if available for consumables\r\n   */\r\n  async purchaseCreditPackage(pkg: CreditPackage, useNativeIAP: boolean = true): Promise<PaymentResult> {\r\n    // Try native IAP for consumables\r\n    if (useNativeIAP && this.iapInitialized) {\r\n      if (Platform.OS === 'ios' && pkg.appleProductId) {\r\n        return await this.purchaseAppleIAP(pkg.appleProductId);\r\n      }\r\n      if (Platform.OS === 'android' && pkg.googleProductId) {\r\n        return await this.purchaseGoogleIAP(pkg.googleProductId);\r\n      }\r\n    }\r\n\r\n    // Fall back to gateway\r\n    try {\r\n      const response = await walletApi.purchasePackage(pkg.id);\r\n      if (response.success && response.checkoutUrl) {\r\n        await Linking.openURL(response.checkoutUrl);\r\n        return {\r\n          success: true,\r\n          transactionId: response.transactionId,\r\n          provider: 'STRIPE',\r\n        };\r\n      }\r\n      return {\r\n        success: false,\r\n        provider: 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', response.error?.message || 'Failed to purchase package'),\r\n      };\r\n    } catch (error: any) {\r\n      return {\r\n        success: false,\r\n        provider: 'STRIPE',\r\n        error: createPurchaseError('UNKNOWN_ERROR', error.message || 'Purchase failed'),\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cancel current subscription\r\n   */\r\n  async cancelSubscription(subscriptionId: string, immediately: boolean = false): Promise<boolean> {\r\n    try {\r\n      // Get current subscription to determine provider\r\n      const current = await subscriptionsApi.getCurrentSubscription();\r\n      const provider = current.subscription?.provider;\r\n\r\n      // For IAP subscriptions, direct to platform settings\r\n      if (provider === 'APPLE_IAP' || provider === 'GOOGLE_IAP') {\r\n        const url = provider === 'APPLE_IAP'\r\n          ? 'https://apps.apple.com/account/subscriptions'\r\n          : 'https://play.google.com/store/account/subscriptions';\r\n        await Linking.openURL(url);\r\n        return true;\r\n      }\r\n\r\n      // Cancel gateway subscription\r\n      const response = await subscriptionsApi.cancelSubscription(subscriptionId, immediately, provider);\r\n      return response.success;\r\n    } catch (error) {\r\n      console.error('Failed to cancel subscription:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get IAP logs for debugging\r\n   */\r\n  getLogs(): IAPLogEntry[] {\r\n    return iapLogger.getLogs();\r\n  }\r\n\r\n  /**\r\n   * Clear IAP logs\r\n   */\r\n  clearLogs() {\r\n    iapLogger.clearLogs();\r\n  }\r\n\r\n  /**\r\n   * Disconnect from IAP store\r\n   * Call this on app shutdown\r\n   */\r\n  async disconnect() {\r\n    try {\r\n      if (this.purchaseListener) {\r\n        this.purchaseListener.remove();\r\n        this.purchaseListener = null;\r\n      }\r\n\r\n      if (this.iapConnected) {\r\n        await InAppPurchases.disconnectAsync();\r\n        this.iapConnected = false;\r\n        this.iapInitialized = false;\r\n\r\n        iapLogger.log('info', 'Disconnected from IAP store', 'initialization');\r\n      }\r\n    } catch (error: any) {\r\n      iapLogger.log('error', 'Failed to disconnect from IAP', 'initialization', {\r\n        error: error.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if IAP is available and initialized\r\n   */\r\n  isIAPAvailable(): boolean {\r\n    return this.iapInitialized && this.iapConnected;\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const billingService = new BillingService();\r\n\r\nexport default billingService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}