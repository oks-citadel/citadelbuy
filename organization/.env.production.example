################################################################################
# Broxiva Production Environment Template
################################################################################
# This file contains all environment variables required for production deployment
#
# SECURITY CRITICAL:
#   1. NEVER commit actual secrets to version control
#   2. Generate all secrets using: ./scripts/generate-secrets.sh
#   3. Store production secrets in a secrets manager (AWS Secrets Manager, Azure Key Vault, etc.)
#   4. Use different secrets for dev/staging/production
#   5. Rotate secrets every 90 days minimum
#
# Usage:
#   1. Copy this file: cp .env.production.example .env.production
#   2. Generate secrets: ./scripts/generate-secrets.sh --output .env.production
#   3. Validate secrets: ./scripts/validate-secrets.sh .env.production
#   4. Deploy using your secrets manager (DO NOT deploy .env files directly)
#
################################################################################

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Node Environment (MUST be 'production' for production)
NODE_ENV=production

# API Server Port
PORT=4000

# API Prefix (e.g., /api/v1)
API_PREFIX=/api

# Frontend URL (for CORS and email links)
FRONTEND_URL=https://broxiva.com

# CORS Origins (comma-separated, NO wildcards in production)
CORS_ORIGINS=https://broxiva.com,https://admin.broxiva.com

# =============================================================================
# CRITICAL SECRETS - GENERATE USING: ./scripts/generate-secrets.sh
# =============================================================================

# JWT Authentication Secrets
# REQUIREMENTS:
#   - Minimum 64 characters
#   - Base64 encoded
#   - MUST be different from each other
#   - Generate: openssl rand -base64 64
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_VALUE_MIN_64_CHARS_GENERATE_WITH_OPENSSL
JWT_REFRESH_SECRET=REPLACE_WITH_DIFFERENT_SECURE_RANDOM_VALUE_MIN_64_CHARS
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Session Secret (for cookie signing)
# REQUIREMENTS: Minimum 64 characters
# Generate: openssl rand -base64 64
SESSION_SECRET=REPLACE_WITH_SECURE_RANDOM_VALUE_MIN_64_CHARS

# Encryption Keys (AES-256)
# REQUIREMENTS:
#   - EXACTLY 64 hexadecimal characters (32 bytes)
#   - Generate: openssl rand -hex 32
#   - CRITICAL: If lost, encrypted data cannot be recovered
ENCRYPTION_KEY=REPLACE_WITH_64_HEX_CHARS_EXACTLY_32_BYTES_OPENSSL_RAND_HEX_32
KYC_ENCRYPTION_KEY=REPLACE_WITH_64_HEX_CHARS_EXACTLY_32_BYTES_DIFFERENT_KEY

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
# REQUIREMENTS: Password minimum 32 characters
# Generate password: openssl rand -base64 48
POSTGRES_USER=broxiva
POSTGRES_PASSWORD=REPLACE_WITH_SECURE_DB_PASSWORD_MIN_32_CHARS
POSTGRES_DB=broxiva_production
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Full Database URL
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
# Ensure password is URL-encoded if it contains special characters
DATABASE_URL=postgresql://broxiva:REPLACE_PASSWORD@localhost:5432/broxiva_production?schema=public

# Database Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_TIMEOUT=30000

# =============================================================================
# CACHE & SESSION STORE (REDIS)
# =============================================================================

# Redis Configuration
# REQUIREMENTS: Password minimum 32 characters
# Generate: openssl rand -base64 48
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=REPLACE_WITH_SECURE_REDIS_PASSWORD_MIN_32_CHARS
REDIS_URL=redis://:REPLACE_PASSWORD@localhost:6379
REDIS_TLS=false

# Redis Settings
REDIS_DB=0
REDIS_KEY_PREFIX=broxiva:
REDIS_TIMEOUT=5000

# =============================================================================
# MESSAGE QUEUE (RABBITMQ)
# =============================================================================

# RabbitMQ Configuration
# REQUIREMENTS: Password minimum 32 characters
# Generate: openssl rand -base64 48
RABBITMQ_USER=broxiva
RABBITMQ_PASSWORD=REPLACE_WITH_SECURE_RABBITMQ_PASSWORD_MIN_32_CHARS
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_URL=amqp://broxiva:REPLACE_PASSWORD@localhost:5672
RABBITMQ_VHOST=/

# =============================================================================
# OBJECT STORAGE (MINIO / S3-COMPATIBLE)
# =============================================================================

# MinIO Configuration
# REQUIREMENTS: Root password minimum 8 characters (32+ recommended)
# Generate: openssl rand -base64 48
MINIO_ROOT_USER=broxiva_admin
MINIO_ROOT_PASSWORD=REPLACE_WITH_SECURE_MINIO_PASSWORD_MIN_32_CHARS
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_BUCKET=broxiva-uploads

# MinIO Access Keys (for API access)
# Generate: openssl rand -base64 32 and openssl rand -base64 48
MINIO_ACCESS_KEY=REPLACE_WITH_ACCESS_KEY_MIN_20_CHARS
MINIO_SECRET_KEY=REPLACE_WITH_SECRET_KEY_MIN_40_CHARS

# =============================================================================
# CLOUD STORAGE (AWS S3)
# =============================================================================

# AWS S3 Configuration
# Get from: https://console.aws.amazon.com/iam/
# SECURITY: Use IAM role in production instead of access keys
AWS_ENABLED=false
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_REGION=us-east-1
AWS_S3_BUCKET=broxiva-production-uploads

# =============================================================================
# CLOUD STORAGE (AZURE BLOB)
# =============================================================================

# Azure Blob Storage (Alternative to S3/MinIO)
# Get from: https://portal.azure.com
AZURE_STORAGE_ENABLED=false
AZURE_STORAGE_ACCOUNT_NAME=broxiva
AZURE_STORAGE_ACCOUNT_KEY=REPLACE_WITH_AZURE_STORAGE_KEY
AZURE_STORAGE_CONTAINER=broxiva-documents

# =============================================================================
# PAYMENT PROVIDERS
# =============================================================================

# Stripe (Primary Payment Gateway)
# Get from: https://dashboard.stripe.com/apikeys
# CRITICAL: Must use live keys (sk_live_* not sk_test_*)
STRIPE_ENABLED=true
STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_LIVE_KEY_FROM_STRIPE_DASHBOARD
STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_LIVE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_WEBHOOK_SECRET_FROM_STRIPE

# Apple Pay / Google Pay (via Stripe)
APPLE_MERCHANT_ID=merchant.com.broxiva
GOOGLE_MERCHANT_ID=BCR2DN4TXXXXXXXX

# PayPal (Secondary Payment Gateway)
# Get from: https://developer.paypal.com/dashboard
# CRITICAL: Mode must be 'live' not 'sandbox'
PAYPAL_ENABLED=true
PAYPAL_CLIENT_ID=REPLACE_WITH_PAYPAL_CLIENT_ID
PAYPAL_CLIENT_SECRET=REPLACE_WITH_PAYPAL_CLIENT_SECRET
PAYPAL_MODE=live
PAYPAL_WEBHOOK_ID=REPLACE_WITH_WEBHOOK_ID

# Flutterwave (African Markets)
# Get from: https://dashboard.flutterwave.com/
FLUTTERWAVE_ENABLED=false
FLUTTERWAVE_PUBLIC_KEY=FLWPUBK-REPLACE
FLUTTERWAVE_SECRET_KEY=FLWSECK-REPLACE
FLUTTERWAVE_ENCRYPTION_KEY=REPLACE
FLUTTERWAVE_WEBHOOK_SECRET=REPLACE

# Paystack (Nigeria, Ghana, South Africa, Kenya)
# Get from: https://dashboard.paystack.com/
PAYSTACK_ENABLED=false
PAYSTACK_PUBLIC_KEY=pk_live_REPLACE
PAYSTACK_SECRET_KEY=sk_live_REPLACE

# =============================================================================
# EMAIL SERVICE
# =============================================================================

# SendGrid (Recommended)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.REPLACE_WITH_SENDGRID_API_KEY
SENDGRID_FROM_EMAIL=noreply@broxiva.com
SENDGRID_FROM_NAME=Broxiva

# Alternative: SMTP Configuration
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_USER=apikey
EMAIL_PASSWORD=SG.REPLACE_WITH_SENDGRID_API_KEY
EMAIL_FROM=noreply@broxiva.com
EMAIL_SECURE=false
EMAIL_TLS=true

# Support Email
SUPPORT_EMAIL=support@broxiva.com

# =============================================================================
# SOCIAL LOGIN (OAUTH)
# =============================================================================

# Google OAuth
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=REPLACE_WITH_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=REPLACE_WITH_GOOGLE_CLIENT_SECRET
GOOGLE_REDIRECT_URI=https://broxiva.com/auth/google/callback

# Facebook OAuth
# Get from: https://developers.facebook.com/apps/
FACEBOOK_APP_ID=REPLACE_WITH_FACEBOOK_APP_ID
FACEBOOK_APP_SECRET=REPLACE_WITH_FACEBOOK_APP_SECRET
FACEBOOK_REDIRECT_URI=https://broxiva.com/auth/facebook/callback

# GitHub OAuth
# Get from: https://github.com/settings/developers
GITHUB_CLIENT_ID=REPLACE_WITH_GITHUB_CLIENT_ID
GITHUB_CLIENT_SECRET=REPLACE_WITH_GITHUB_CLIENT_SECRET
GITHUB_REDIRECT_URI=https://broxiva.com/auth/github/callback

# Apple Sign In
# Get from: https://developer.apple.com/account/resources/identifiers/
APPLE_CLIENT_ID=com.broxiva.app
APPLE_TEAM_ID=REPLACE_WITH_TEAM_ID
APPLE_KEY_ID=REPLACE_WITH_KEY_ID
APPLE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----

# =============================================================================
# SEARCH SERVICES
# =============================================================================

# Search Provider Selection
# Options: 'elasticsearch', 'algolia', 'internal', 'auto'
SEARCH_PROVIDER=elasticsearch

# Elasticsearch
# Generate password: openssl rand -base64 48
ELASTICSEARCH_NODE=https://elasticsearch.broxiva.com:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=REPLACE_WITH_ELASTICSEARCH_PASSWORD_MIN_32_CHARS
ELASTICSEARCH_INDEX_PREFIX=broxiva
ELASTICSEARCH_BULK_SIZE=1000
ELASTICSEARCH_REQUEST_TIMEOUT=30000
ELASTICSEARCH_SSL_VERIFY=true

# Algolia (Alternative)
# Get from: https://www.algolia.com/account/api-keys/
ALGOLIA_ENABLED=false
ALGOLIA_APP_ID=REPLACE_WITH_ALGOLIA_APP_ID
ALGOLIA_API_KEY=REPLACE_WITH_ALGOLIA_ADMIN_API_KEY
ALGOLIA_INDEX_NAME=broxiva_products_production

# =============================================================================
# AI SERVICES
# =============================================================================

# OpenAI (AI Features)
# Get from: https://platform.openai.com/api-keys
# SECURITY: Monitor usage and set spending limits
OPENAI_API_KEY=sk-proj-REPLACE_WITH_OPENAI_API_KEY
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Google Cloud Vision (Visual Search)
# Get from: https://console.cloud.google.com/
GOOGLE_CLOUD_PROJECT_ID=REPLACE_WITH_PROJECT_ID
GOOGLE_APPLICATION_CREDENTIALS=/path/to/credentials.json

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_FILE_PATH=/var/log/broxiva/api.log

# Sentry (Error Tracking)
# Get from: https://sentry.io/settings/projects/
SENTRY_DSN=https://REPLACE_KEY@o0000000.ingest.sentry.io/0000000
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# New Relic (APM)
NEW_RELIC_ENABLED=false
NEW_RELIC_LICENSE_KEY=REPLACE_WITH_LICENSE_KEY
NEW_RELIC_APP_NAME=Broxiva Production

# Datadog (Monitoring)
DATADOG_ENABLED=false
DATADOG_API_KEY=REPLACE_WITH_DATADOG_API_KEY

# =============================================================================
# ADMIN TOOLS
# =============================================================================

# Grafana Dashboard
# REQUIREMENTS: Password minimum 32 characters
# Generate: openssl rand -base64 48
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=REPLACE_WITH_SECURE_GRAFANA_PASSWORD_MIN_32_CHARS
GRAFANA_PORT=3001

# pgAdmin (Database UI)
# REQUIREMENTS: Password minimum 32 characters
# Generate: openssl rand -base64 48
PGADMIN_DEFAULT_EMAIL=admin@broxiva.com
PGADMIN_DEFAULT_PASSWORD=REPLACE_WITH_SECURE_PGADMIN_PASSWORD_MIN_32_CHARS
PGADMIN_PORT=5050

# =============================================================================
# INTERNAL API KEYS
# =============================================================================

# Internal Service Authentication
# Generate: openssl rand -base64 48
INTERNAL_API_KEY=REPLACE_WITH_INTERNAL_API_KEY_MIN_40_CHARS
WEBHOOK_SECRET=REPLACE_WITH_WEBHOOK_SECRET_MIN_64_CHARS

# =============================================================================
# RATE LIMITING & THROTTLING
# =============================================================================

# Rate Limit Settings
THROTTLE_TTL=60
THROTTLE_LIMIT=100
THROTTLE_STRICT_MODE=true

# IP Whitelist (comma-separated)
IP_WHITELIST=

# =============================================================================
# SECURITY HEADERS
# =============================================================================

# CORS Configuration
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600

# Security Headers
HELMET_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
FEATURE_AI_RECOMMENDATIONS=true
FEATURE_VISUAL_SEARCH=true
FEATURE_LIVE_CHAT=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_MOBILE_APP_IAP=true

# =============================================================================
# MOBILE APP IN-APP PURCHASES
# =============================================================================

# Apple IAP (iOS StoreKit)
# Get from: https://appstoreconnect.apple.com
APPLE_SHARED_SECRET=REPLACE_WITH_SHARED_SECRET
APPLE_BUNDLE_ID=com.broxiva.app
APPLE_ISSUER_ID=REPLACE_WITH_ISSUER_ID
APPLE_KEY_ID=REPLACE_WITH_KEY_ID
APPLE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----

# Google Play Billing (Android)
# Get from: https://play.google.com/console
GOOGLE_PACKAGE_NAME=com.broxiva.app
GOOGLE_SERVICE_ACCOUNT_EMAIL=billing@project.iam.gserviceaccount.com
GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nREPLACE\n-----END PRIVATE KEY-----

# =============================================================================
# ANALYTICS & MARKETING
# =============================================================================

# Facebook Conversions API
# Get from: https://business.facebook.com/
FACEBOOK_PIXEL_ID=REPLACE_WITH_PIXEL_ID
FACEBOOK_ACCESS_TOKEN=REPLACE_WITH_ACCESS_TOKEN

# TikTok Events API
# Get from: https://ads.tiktok.com/
TIKTOK_PIXEL_ID=REPLACE_WITH_PIXEL_ID
TIKTOK_ACCESS_TOKEN=REPLACE_WITH_ACCESS_TOKEN

# Google Analytics
GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Database Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=broxiva-backups

# =============================================================================
# HEALTH CHECKS
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_STORAGE=true

# =============================================================================
# NOTES
# =============================================================================
#
# DEPLOYMENT CHECKLIST:
#   [ ] All secrets generated using ./scripts/generate-secrets.sh
#   [ ] Secrets validated using ./scripts/validate-secrets.sh
#   [ ] Production secrets stored in secrets manager (not .env file)
#   [ ] All REPLACE_WITH_* placeholders replaced
#   [ ] All API keys are production keys (no test/sandbox keys)
#   [ ] NODE_ENV set to 'production'
#   [ ] Payment providers in live mode
#   [ ] CORS_ORIGINS restricted (no wildcards)
#   [ ] Monitoring and logging configured
#   [ ] Backup strategy in place
#   [ ] Secret rotation schedule documented
#
# NEVER COMMIT THIS FILE WITH ACTUAL SECRETS!
#
# For more information, see:
#   - docs/SECURITY_CREDENTIALS.md
#   - docs/SECURITY_SETUP.md
#
################################################################################
