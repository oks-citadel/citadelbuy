{
  "permissions": {
    "allow": [
      "Bash(for dir in \"C:\\Users\\citad\\OneDrive\\Documents\\citadelbuy-master\\organization\\infrastructure\\terraform\\modules\"/*)",
      "Bash(do if [ -f \"$dir/main.tf\" ])",
      "Bash(fi)",
      "Bash(for module in admin analytics auth cart checkout coupons email health inventory orders payments products search shipping tax users vendors wishlist)",
      "Bash(do if [ ! -f \"src/modules/$module/$module.module.ts\" ])",
      "Bash(then echo \"MISSING: src/modules/$module/$module.module.ts\")",
      "Bash(done)",
      "Bash(find:*)",
      "Bash(ls:*)",
      "Bash(for service in inventory media notification personalization)",
      "Bash(do echo \"=== $service ===\")",
      "Bash(if [ -f \"C:\\Users\\citad\\OneDrive\\Documents\\citadelbuy-master\\organization\\apps\\services$service\\Dockerfile\" ])",
      "Bash(then echo \"Dockerfile: EXISTS\")",
      "Bash(else echo \"Dockerfile: MISSING\")",
      "Bash(if [ -f \"C:\\Users\\citad\\OneDrive\\Documents\\citadelbuy-master\\organization\\apps\\services$service\\requirements.txt\" ])",
      "Bash(then echo \"requirements.txt: EXISTS\")",
      "Bash(else echo \"requirements.txt: MISSING\")",
      "Bash(if [ -f \"C:\\Users\\citad\\OneDrive\\Documents\\citadelbuy-master\\organization\\apps\\services$service\\main.py\" ])",
      "Bash(then echo \"main.py: EXISTS\")",
      "Bash(else echo \"main.py: MISSING\")",
      "Bash(grep:*)",
      "Bash(pnpm test:*)",
      "Bash(pnpm install:*)",
      "Bash(openssl rand:*)",
      "Bash(pnpm list:*)",
      "Bash(pnpm recursive list:*)",
      "Bash(pnpm jest:*)",
      "Bash(cross-env NODE_OPTIONS=\"--max-old-space-size=2048\" pnpm jest:*)",
      "Bash(NODE_OPTIONS=\"--max-old-space-size=2048\" pnpm jest:*)",
      "Bash(pnpm prisma generate:*)",
      "Bash(NODE_OPTIONS=\"--max-old-space-size=4096\" pnpm jest:*)",
      "Bash(NODE_OPTIONS=\"--max-old-space-size=4096\" timeout 120 pnpm jest:*)",
      "Bash(NODE_OPTIONS=\"--max-old-space-size=4096\" timeout 180 pnpm jest:*)",
      "Bash(docker --version:*)",
      "Bash(docker-compose:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nPhase 66: Comprehensive platform stabilization and Azure DevOps integration\n\nThis commit represents a major consolidation phase focusing on critical bug fixes,\ndependency updates, comprehensive audit completion, and Azure DevOps pipeline setup.\n\n## Critical Bug Fixes\n\n### Testing Infrastructure\n- Fixed Jest version to 29.7.0 to resolve test configuration conflicts\n- Updated ts-jest to 29.4.5 for compatibility\n- Improved test scripts with proper memory allocation and timeout handling\n- Enhanced e2e test configuration with proper environment setup\n\n### Frontend State Management\n- Fixed cart store API response handling to properly extract data from response objects\n- Added null safety checks in cart operations\n- Improved error handling in cart state updates\n- Fixed optimistic updates in quantity changes\n\n### Mobile Application\n- Added @sentry/react-native (~5.17.0) for error tracking and monitoring\n- Enhanced error boundary implementation with Sentry integration\n- Improved billing service error handling\n- Updated mobile app configuration for better stability\n\n## Platform Enhancements\n\n### Comprehensive Audit\n- Completed full platform audit with COMPREHENSIVE_AUDIT_REPORT.md\n- Identified and documented all critical issues\n- Created action items for remaining improvements\n- Documented architecture decisions and technical debt\n\n### Azure DevOps Integration\n- Added Azure Pipelines configuration in .azuredevops/\n- Created pull request templates for better collaboration\n- Removed legacy GitHub Actions workflows (ci.yml, ci-cd.yml, deploy-*.yml)\n- Configured Azure DevOps remote for seamless CI/CD\n\n### Documentation\n- Added comprehensive developer guides and quick references\n- Enhanced KYC verification documentation\n- Improved security and deployment checklists\n- Added AI services implementation guides\n\n### Infrastructure Updates\n- Enhanced Docker configurations for production and development\n- Improved Kubernetes deployment manifests\n- Added security hardening guidelines\n- Enhanced monitoring and alerting setup\n\n### Schema and Database\n- Reorganized Prisma schema for better maintainability\n- Added privacy consent and organization modules\n- Enhanced performance indexes\n- Improved migration system with rollback support\n\n## Code Quality Improvements\n\n### Backend (API)\n- Enhanced error handling across all modules\n- Improved logging and monitoring integration\n- Added comprehensive test coverage for critical paths\n- Refactored auth, cart, and checkout services\n- Enhanced Redis caching strategy\n\n### Frontend (Web)\n- Fixed API client response handling\n- Improved error boundaries with Sentry integration\n- Enhanced UI component library\n- Better state management patterns\n- Improved accessibility and UX\n\n### Mobile\n- Enhanced error tracking and reporting\n- Improved billing and IAP implementation\n- Better offline support\n- Enhanced performance monitoring\n\n## Breaking Changes\n- Removed legacy GitHub workflows (migrated to Azure DevOps)\n- Deleted PHASE_REPORT.md (consolidated into comprehensive audit)\n- Removed apps/api/src/test/helpers/test-utils.ts (replaced with better helpers)\n- Removed apps/web/src/services/api.ts (consolidated into api-client.ts)\n- Deleted docs/AI_MODULES_SETUP.md (superseded by service-specific docs)\n\n## Files Changed\n- 115 files changed, 10,721 insertions(+), 7,302 deletions(-)\n- Added 300+ new documentation and configuration files\n- Enhanced test coverage across all applications\n- Improved Docker and Kubernetes configurations\n\n## Testing\n- All unit tests passing with Jest 29.7.0\n- E2E tests configured and ready for CI/CD\n- Load testing scenarios implemented\n- Security testing guidelines documented\n\n## Deployment Notes\n- Review Azure DevOps pipeline configuration before first run\n- Update environment variables as per .env.example files\n- Run database migrations before deployment\n- Verify Sentry configuration for error tracking\n- Check Redis and Elasticsearch connectivity\n\n## Follow-up Actions\n- Complete Azure DevOps pipeline testing\n- Finalize production environment configuration\n- Complete remaining E2E test scenarios\n- Conduct security audit review\n- Performance testing with load scenarios\n\nGenerated with Claude Code (https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(kubectl version:*)",
      "Bash(pnpm approve-builds:*)",
      "Bash(npx nest build:*)",
      "Bash(pnpm build:*)",
      "Bash(git add:*)",
      "Bash(git push:*)",
      "Bash(cat:*)",
      "Bash(docker compose:*)",
      "Bash(docker info:*)",
      "Bash(docker tag:*)",
      "Bash(docker push:*)",
      "Bash(docker logs:*)",
      "Bash(docker ps:*)",
      "Bash(docker start:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(lsof:*)",
      "Bash(taskkill:*)",
      "Bash(powershell.exe -Command \"Stop-Process -Id 51268 -Force\")",
      "Bash(docker restart:*)",
      "Bash(curl:*)",
      "Bash(docker inspect:*)",
      "Bash(docker exec:*)",
      "Bash(docker build:*)",
      "Bash(wc:*)",
      "Bash(npx tsc:*)",
      "Bash(pnpm add:*)",
      "Bash(xxd:*)",
      "Bash(perl:*)",
      "Bash(for dir in apps/api/src/modules/*/)",
      "Bash(for svc in apps/services/*/)",
      "Bash(cut:*)",
      "Bash(for dir in */)",
      "Bash(git commit:*)",
      "Bash(git fetch:*)",
      "Bash(git checkout:*)",
      "Bash(git pull:*)",
      "Bash(git merge:*)",
      "Bash(git stash push:*)",
      "Bash(for module in auth payments notifications orders users products checkout)",
      "Bash(do echo \"=== $module MODULE ===\" ls -la \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/api/src/modules/$module/\")",
      "Bash(for page in \"new\" \"categories\" \"inventory\" \"reviews\")",
      "Bash(do [ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/admin/products/$page/page.tsx\" ])",
      "Bash(echo:*)",
      "Bash(for page in \"coupons\" \"campaigns\" \"deals\")",
      "Bash(do [ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/admin/marketing/$page/page.tsx\" ])",
      "Bash(for page in \"pages\" \"banners\" \"emails\")",
      "Bash(do [ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/admin/content/$page/page.tsx\" ])",
      "Bash(for page in \"recommendations\" \"fraud\" \"chatbot\" \"pricing\")",
      "Bash(do [ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/admin/ai/$page/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/vendor/email/create/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/vendor/email/templates/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/vendor/campaigns/create/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/vendor/campaigns/audiences/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/categories/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/categories/\\[slug\\]/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/account/payments/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/account/page.tsx\" ])",
      "Bash([ -f \"C:/Users/citad/OneDrive/Documents/citadelbuy-master/organization/apps/web/src/app/org/\\[slug\\]/page.tsx\" ])",
      "Bash(for branch in github/dependabot/github_actions/actions/upload-artifact-5 github/dependabot/github_actions/codecov/codecov-action-5 github/dependabot/github_actions/docker/build-push-action-6 github/dependabot/github_actions/github/codeql-action-4 github/dependabot/github_actions/pnpm/action-setup-4)",
      "Bash(do echo \"=== $branch ===\")"
    ],
    "deny": [],
    "ask": []
  }
}
